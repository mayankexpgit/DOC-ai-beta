"use strict";(self["webpackChunk_N_E"]=self["webpackChunk_N_E"]||[]).push([[644],{49381:(e,t,n)=>{n.d(t,{D:()=>nK,Y:()=>tK,d:()=>i7,p:()=>sd,z:()=>nW});var i=n(42612);var r=n(49887);var s=n(10796);var o=n(39249);var a=n(56391);const c={PHONE:"phone",TOTP:"totp"};const u={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const l={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"};const d={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"};const h={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function p(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not "+"authorized to use Firebase Authentication with the provided API key. "+"Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier ("+"Android package name or iOS bundle ID) provided is not installed on "+"this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, "+"already used or the domain associated with it does not match the list "+"of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try "+"again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in "+"again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is "+"initialized. Please be sure to call `initializeAuth` or `getAuth` before "+"starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and "+"conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:"Auth instance has already been used to make a network call. Auth can "+"no longer be configured to use the emulator. Try calling "+'"connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier."+" The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registered for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen "+"if the user's token has been tampered with, or if the user isn't for "+"the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is "+"invalid. Please resend the verification code sms and be sure to use the "+"verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: "+"cordova-plugin-buildinfo, cordova-universal-links-plugin, "+"cordova-plugin-browsertab, cordova-plugin-inappbrowser and "+"cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is incorrect, malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. "+"Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation "+"only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the "+"specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase "+"project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, "+"expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the "+"phone number in a format that can be parsed into E.164 format. E.164 "+"phone numbers are written in the format [+][country code][subscriber "+"number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided "+"recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. "+"Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), "+"by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier "+"assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the "+"SHA-256 hash of the provided raw nonce does not match the hashed nonce "+"in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different "+"sign-in credentials. Sign in using a provider associated with this "+"email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which "+"requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. "+"Enable it in the Firebase console, under the sign-in method tab of the "+"Auth section.",["operation-not-supported-in-this-environment"]:"This operation is not supported in the environment this application is "+'running on. "location.protocol" must be http, https or chrome-extension'+" and web storage must be enabled.",["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",["timeout"]:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. "+"Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist "+"the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may "+"have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with "+"different options. To avoid this error, call initializeAuth() with the "+"same options as when it was originally called, or call getAuth() to return the"+" already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend.",["unsupported-password-policy-schema-version"]:"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.",["password-does-not-meet-requirements"]:"The password does not meet the requirements.",["invalid-hosting-link-domain"]:"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by "+"the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function f(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is "+"initialized. Please be sure to call `initializeAuth` or `getAuth` before "+"starting any other Firebase SDK."}}const m=null&&p;const g=f;const v=new r.FA("auth","Firebase",f());const I={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};const _=new s.Vy("@firebase/auth");function T(e,...t){if(_.logLevel<=s.$b.WARN){_.warn(`Auth (${i.MF}): ${e}`,...t)}}function E(e,...t){if(_.logLevel<=s.$b.ERROR){_.error(`Auth (${i.MF}): ${e}`,...t)}}function w(e,...t){throw k(e,...t)}function y(e,...t){return k(e,...t)}function A(e,t,n){const i=Object.assign(Object.assign({},g()),{[t]:n});const s=new r.FA("auth","Firebase",i);return s.create(t,{appName:e.name})}function S(e){return A(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function R(e,t,n){const i=n;if(!(t instanceof i)){if(i.name!==t.constructor.name){w(e,"argument-error")}throw A(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.`+`Did you pass a reference from a different Auth SDK?`)}}function k(e,...t){if(typeof e!=="string"){const n=t[0];const i=[...t.slice(1)];if(i[0]){i[0].appName=e.name}return e._errorFactory.create(n,...i)}return v.create(e,...t)}function P(e,t,...n){if(!e){throw k(t,...n)}}function N(e){const t=`INTERNAL ASSERTION FAILED: `+e;E(t);throw new Error(t)}function O(e,t){if(!e){N(t)}}function b(){var e;return typeof self!=="undefined"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function C(){return D()==="http:"||D()==="https:"}function D(){var e;return typeof self!=="undefined"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function L(){if(typeof navigator!=="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine==="boolean"&&(C()||(0,r.sr)()||"connection"in navigator)){return navigator.onLine}return true}function M(){if(typeof navigator==="undefined"){return null}const e=navigator;return e.languages&&e.languages[0]||e.language||null}class U{constructor(e,t){this.shortDelay=e;this.longDelay=t;O(t>e,"Short delay should be less than long delay!");this.isMobile=(0,r.jZ)()||(0,r.lV)()}get(){if(!L()){return Math.min(5e3,this.shortDelay)}return this.isMobile?this.longDelay:this.shortDelay}}function F(e,t){O(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;if(!t){return n}return`${n}${t.startsWith("/")?t.slice(1):t}`}class V{static initialize(e,t,n){this.fetchImpl=e;if(t){this.headersImpl=t}if(n){this.responseImpl=n}}static fetch(){if(this.fetchImpl){return this.fetchImpl}if(typeof self!=="undefined"&&"fetch"in self){return self.fetch}if(typeof globalThis!=="undefined"&&globalThis.fetch){return globalThis.fetch}if(typeof fetch!=="undefined"){return fetch}N("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl){return this.headersImpl}if(typeof self!=="undefined"&&"Headers"in self){return self.Headers}if(typeof globalThis!=="undefined"&&globalThis.Headers){return globalThis.Headers}if(typeof Headers!=="undefined"){return Headers}N("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl){return this.responseImpl}if(typeof self!=="undefined"&&"Response"in self){return self.Response}if(typeof globalThis!=="undefined"&&globalThis.Response){return globalThis.Response}if(typeof Response!=="undefined"){return Response}N("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const x={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["INVALID_LOGIN_CREDENTIALS"]:"invalid-credential",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["PASSWORD_DOES_NOT_MEET_REQUIREMENTS"]:"password-does-not-meet-requirements",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error",["RECAPTCHA_NOT_ENABLED"]:"recaptcha-not-enabled",["MISSING_RECAPTCHA_TOKEN"]:"missing-recaptcha-token",["INVALID_RECAPTCHA_TOKEN"]:"invalid-recaptcha-token",["INVALID_RECAPTCHA_ACTION"]:"invalid-recaptcha-action",["MISSING_CLIENT_TYPE"]:"missing-client-type",["MISSING_RECAPTCHA_VERSION"]:"missing-recaptcha-version",["INVALID_RECAPTCHA_VERSION"]:"invalid-recaptcha-version",["INVALID_REQ_TYPE"]:"invalid-req-type"};const j=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"];const H=new U(3e4,6e4);function q(e,t){if(e.tenantId&&!t.tenantId){return Object.assign(Object.assign({},t),{tenantId:e.tenantId})}return t}async function W(e,t,n,i,s={}){return z(e,s,async()=>{let s={};let o={};if(i){if(t==="GET"){o=i}else{s={body:JSON.stringify(i)}}}const a=(0,r.Am)(Object.assign({key:e.config.apiKey},o)).slice(1);const c=await e._getAdditionalHeaders();c["Content-Type"]="application/json";if(e.languageCode){c["X-Firebase-Locale"]=e.languageCode}const u=Object.assign({method:t,headers:c},s);if(!(0,r.c1)()){u.referrerPolicy="no-referrer"}if(e.emulatorConfig&&(0,r.zJ)(e.emulatorConfig.host)){u.credentials="include"}return V.fetch()(await K(e,e.config.apiHost,n,a),u)})}async function z(e,t,n){e._canInitEmulator=false;const i=Object.assign(Object.assign({},x),t);try{const t=new B(e);const r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s){throw J(e,"account-exists-with-different-credential",s)}if(r.ok&&!("errorMessage"in s)){return s}else{const t=r.ok?s.errorMessage:s.error.message;const[n,o]=t.split(" : ");if(n==="FEDERATED_USER_ID_ALREADY_LINKED"){throw J(e,"credential-already-in-use",s)}else if(n==="EMAIL_EXISTS"){throw J(e,"email-already-in-use",s)}else if(n==="USER_DISABLED"){throw J(e,"user-disabled",s)}const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o){throw A(e,a,o)}else{w(e,a)}}}catch(t){if(t instanceof r.g){throw t}w(e,"network-request-failed",{"message":String(t)})}}async function G(e,t,n,i,r={}){const s=await W(e,t,n,i,r);if("mfaPendingCredential"in s){w(e,"multi-factor-auth-required",{_serverResponse:s})}return s}async function K(e,t,n,i){const r=`${t}${n}?${i}`;const s=e;const o=s.config.emulator?F(e.config,r):`${e.config.apiScheme}://${r}`;if(j.includes(n)){await s._persistenceManagerAvailable;if(s._getPersistenceType()==="COOKIE"){const e=s._getPersistence();return e._getFinalTarget(o).toString()}}return o}function $(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class B{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e;this.timer=null;this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>{return t(y(this.auth,"network-request-failed"))},H.get())})}}function J(e,t,n){const i={appName:e.name};if(n.email){i.email=n.email}if(n.phoneNumber){i.phoneNumber=n.phoneNumber}const r=y(e,t,i);r.customData._tokenResponse=n;return r}function Y(e){return e!==undefined&&e.getResponse!==undefined}function Z(e){return e!==undefined&&e.enterprise!==undefined}class Q{constructor(e){this.siteKey="";this.recaptchaEnforcementState=[];if(e.recaptchaKey===undefined){throw new Error("recaptchaKey undefined")}this.siteKey=e.recaptchaKey.split("/")[3];this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0){return null}for(const t of this.recaptchaEnforcementState){if(t.provider&&t.provider===e){return $(t.enforcementState)}}return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function X(e){return(await W(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ee(e,t){return W(e,"GET","/v2/recaptchaConfig",q(e,t))}async function et(e,t){return W(e,"POST","/v1/accounts:delete",t)}async function en(e,t){return W(e,"POST","/v1/accounts:update",t)}async function ei(e,t){return W(e,"POST","/v1/accounts:lookup",t)}function er(e){if(!e){return undefined}try{const t=new Date(Number(e));if(!isNaN(t.getTime())){return t.toUTCString()}}catch(e){}return undefined}function es(e,t=false){return getModularInstance(e).getIdToken(t)}async function eo(e,t=false){const n=(0,r.Ku)(e);const i=await n.getIdToken(t);const s=ec(i);P(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase==="object"?s.firebase:undefined;const a=o===null||o===void 0?void 0:o["sign_in_provider"];return{claims:s,token:i,authTime:er(ea(s.auth_time)),issuedAtTime:er(ea(s.iat)),expirationTime:er(ea(s.exp)),signInProvider:a||null,signInSecondFactor:(o===null||o===void 0?void 0:o["sign_in_second_factor"])||null}}function ea(e){return Number(e)*1e3}function ec(e){const[t,n,i]=e.split(".");if(t===undefined||n===undefined||i===undefined){E("JWT malformed, contained fewer than 3 sections");return null}try{const e=(0,r.u)(n);if(!e){E("Failed to decode base64 JWT payload");return null}return JSON.parse(e)}catch(e){E("Caught error parsing JWT payload as JSON",e===null||e===void 0?void 0:e.toString());return null}}function eu(e){const t=ec(e);P(t,"internal-error");P(typeof t.exp!=="undefined","internal-error");P(typeof t.iat!=="undefined","internal-error");return Number(t.exp)-Number(t.iat)}async function el(e,t,n=false){if(n){return t}try{return await t}catch(t){if(t instanceof r.g&&ed(t)){if(e.auth.currentUser===e){await e.auth.signOut()}}throw t}}function ed({code:e}){return e===`auth/${"user-disabled"}`||e===`auth/${"user-token-expired"}`}class eh{constructor(e){this.user=e;this.isRunning=false;this.timerId=null;this.errorBackoff=3e4}_start(){if(this.isRunning){return}this.isRunning=true;this.schedule()}_stop(){if(!this.isRunning){return}this.isRunning=false;if(this.timerId!==null){clearTimeout(this.timerId)}}getInterval(e){var t;if(e){const e=this.errorBackoff;this.errorBackoff=Math.min(this.errorBackoff*2,96e4);return e}else{this.errorBackoff=3e4;const e=(t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0;const n=e-Date.now()-3e5;return Math.max(0,n)}}schedule(e=false){if(!this.isRunning){return}const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(true)}catch(e){if((e===null||e===void 0?void 0:e.code)===`auth/${"network-request-failed"}`){this.schedule(true)}return}this.schedule()}}class ep{constructor(e,t){this.createdAt=e;this.lastLoginAt=t;this._initializeTime()}_initializeTime(){this.lastSignInTime=er(this.lastLoginAt);this.creationTime=er(this.createdAt)}_copy(e){this.createdAt=e.createdAt;this.lastLoginAt=e.lastLoginAt;this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ef(e){var t;const n=e.auth;const i=await e.getIdToken();const r=await el(e,ei(n,{idToken:i}));P(r===null||r===void 0?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=((t=s.providerUserInfo)===null||t===void 0?void 0:t.length)?ev(s.providerUserInfo):[];const a=eg(e.providerData,o);const c=e.isAnonymous;const u=!(e.email&&s.passwordHash)&&!(a===null||a===void 0?void 0:a.length);const l=!c?false:u;const d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||false,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ep(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(e,d)}async function em(e){const t=(0,r.Ku)(e);await ef(t);await t.auth._persistUserIfCurrent(t);t.auth._notifyListenersIfCurrent(t)}function eg(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}function ev(e){return e.map(e=>{var{providerId:t}=e,n=(0,o.Tt)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function eI(e,t){const n=await z(e,{},async()=>{const n=(0,r.Am)({"grant_type":"refresh_token","refresh_token":t}).slice(1);const{tokenApiHost:i,apiKey:s}=e.config;const o=await K(e,i,"/v1/token",`key=${s}`);const a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:n};if(e.emulatorConfig&&(0,r.zJ)(e.emulatorConfig.host)){c.credentials="include"}return V.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function e_(e,t){return W(e,"POST","/v2/accounts:revokeToken",q(e,t))}class eT{constructor(){this.refreshToken=null;this.accessToken=null;this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){P(e.idToken,"internal-error");P(typeof e.idToken!=="undefined","internal-error");P(typeof e.refreshToken!=="undefined","internal-error");const t="expiresIn"in e&&typeof e.expiresIn!=="undefined"?Number(e.expiresIn):eu(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){P(e.length!==0,"internal-error");const t=eu(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=false){if(!t&&this.accessToken&&!this.isExpired){return this.accessToken}P(this.refreshToken,e,"user-token-expired");if(this.refreshToken){await this.refresh(e,this.refreshToken);return this.accessToken}return null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await eI(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null;this.accessToken=e||null;this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t;const s=new eT;if(n){P(typeof n==="string","internal-error",{appName:e});s.refreshToken=n}if(i){P(typeof i==="string","internal-error",{appName:e});s.accessToken=i}if(r){P(typeof r==="number","internal-error",{appName:e});s.expirationTime=r}return s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken;this.refreshToken=e.refreshToken;this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eT,this.toJSON())}_performRefresh(){return N("not implemented")}}function eE(e,t){P(typeof e==="string"||typeof e==="undefined","internal-error",{appName:t})}class ew{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=(0,o.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase";this.proactiveRefresh=new eh(this);this.reloadUserInfo=null;this.reloadListener=null;this.uid=t;this.auth=n;this.stsTokenManager=i;this.accessToken=i.accessToken;this.displayName=r.displayName||null;this.email=r.email||null;this.emailVerified=r.emailVerified||false;this.phoneNumber=r.phoneNumber||null;this.photoURL=r.photoURL||null;this.isAnonymous=r.isAnonymous||false;this.tenantId=r.tenantId||null;this.providerData=r.providerData?[...r.providerData]:[];this.metadata=new ep(r.createdAt||undefined,r.lastLoginAt||undefined)}async getIdToken(e){const t=await el(this,this.stsTokenManager.getToken(this.auth,e));P(t,this.auth,"internal-error");if(this.accessToken!==t){this.accessToken=t;await this.auth._persistUserIfCurrent(this);this.auth._notifyListenersIfCurrent(this)}return t}getIdTokenResult(e){return eo(this,e)}reload(){return em(this)}_assign(e){if(this===e){return}P(this.uid===e.uid,this.auth,"internal-error");this.displayName=e.displayName;this.photoURL=e.photoURL;this.email=e.email;this.emailVerified=e.emailVerified;this.phoneNumber=e.phoneNumber;this.isAnonymous=e.isAnonymous;this.tenantId=e.tenantId;this.providerData=e.providerData.map(e=>Object.assign({},e));this.metadata._copy(e.metadata);this.stsTokenManager._assign(e.stsTokenManager)}_clone(e){const t=new ew(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));t.metadata._copy(this.metadata);return t}_onReload(e){P(!this.reloadListener,this.auth,"internal-error");this.reloadListener=e;if(this.reloadUserInfo){this._notifyReloadListener(this.reloadUserInfo);this.reloadUserInfo=null}}_notifyReloadListener(e){if(this.reloadListener){this.reloadListener(e)}else{this.reloadUserInfo=e}}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=false){let n=false;if(e.idToken&&e.idToken!==this.stsTokenManager.accessToken){this.stsTokenManager.updateFromServerResponse(e);n=true}if(t){await ef(this)}await this.auth._persistUserIfCurrent(this);if(n){this.auth._notifyListenersIfCurrent(this)}}async delete(){if((0,i.xZ)(this.auth.app)){return Promise.reject(S(this.auth))}const e=await this.getIdToken();await el(this,et(this.auth,{idToken:e}));this.stsTokenManager.clearRefreshToken();return this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||undefined,emailVerified:this.emailVerified,displayName:this.displayName||undefined,isAnonymous:this.isAnonymous,photoURL:this.photoURL||undefined,phoneNumber:this.phoneNumber||undefined,tenantId:this.tenantId||undefined,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,c,u;const l=(n=t.displayName)!==null&&n!==void 0?n:undefined;const d=(i=t.email)!==null&&i!==void 0?i:undefined;const h=(r=t.phoneNumber)!==null&&r!==void 0?r:undefined;const p=(s=t.photoURL)!==null&&s!==void 0?s:undefined;const f=(o=t.tenantId)!==null&&o!==void 0?o:undefined;const m=(a=t._redirectEventId)!==null&&a!==void 0?a:undefined;const g=(c=t.createdAt)!==null&&c!==void 0?c:undefined;const v=(u=t.lastLoginAt)!==null&&u!==void 0?u:undefined;const{uid:I,emailVerified:_,isAnonymous:T,providerData:E,stsTokenManager:w}=t;P(I&&w,e,"internal-error");const y=eT.fromJSON(this.name,w);P(typeof I==="string",e,"internal-error");eE(l,e.name);eE(d,e.name);P(typeof _==="boolean",e,"internal-error");P(typeof T==="boolean",e,"internal-error");eE(h,e.name);eE(p,e.name);eE(f,e.name);eE(m,e.name);eE(g,e.name);eE(v,e.name);const A=new ew({uid:I,auth:e,email:d,emailVerified:_,displayName:l,isAnonymous:T,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:y,createdAt:g,lastLoginAt:v});if(E&&Array.isArray(E)){A.providerData=E.map(e=>Object.assign({},e))}if(m){A._redirectEventId=m}return A}static async _fromIdTokenResponse(e,t,n=false){const i=new eT;i.updateFromServerResponse(t);const r=new ew({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});await ef(r);return r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];P(i.localId!==undefined,"internal-error");const r=i.providerUserInfo!==undefined?ev(i.providerUserInfo):[];const s=!(i.email&&i.passwordHash)&&!(r===null||r===void 0?void 0:r.length);const o=new eT;o.updateFromIdToken(n);const a=new ew({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s});const c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||false,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new ep(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r===null||r===void 0?void 0:r.length)};Object.assign(a,c);return a}}const ey=new Map;function eA(e){O(e instanceof Function,"Expected a class definition");let t=ey.get(e);if(t){O(t instanceof e,"Instance stored in cache mismatched with class");return t}t=new e;ey.set(e,t);return t}class eS{constructor(){this.type="NONE";this.storage={}}async _isAvailable(){return true}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===undefined?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){return}_removeListener(e,t){return}}eS.type="NONE";const eR=eS;function ek(e,t,n){return`${"firebase"}:${e}:${t}:${n}`}class eP{constructor(e,t,n){this.persistence=e;this.auth=t;this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ek(this.userKey,i.apiKey,r);this.fullPersistenceKey=ek("persistence",i.apiKey,r);this.boundEventHandler=t._onStorageEvent.bind(t);this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e){return null}if(typeof e==="string"){const t=await ei(this.auth,{idToken:e}).catch(()=>undefined);if(!t){return null}return ew._fromGetAccountInfoResponse(this.auth,t,e)}return ew._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e){return}const t=await this.getCurrentUser();await this.removeCurrentUser();this.persistence=e;if(t){return this.setCurrentUser(t)}}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length){return new eP(eA(eR),e,n)}const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable()){return e}return undefined}))).filter(e=>e);let r=i[0]||eA(eR);const s=ek(n,e.config.apiKey,e.name);let o=null;for(const n of t){try{const t=await n._get(s);if(t){let i;if(typeof t==="string"){const n=await ei(e,{idToken:t}).catch(()=>undefined);if(!n){break}i=await ew._fromGetAccountInfoResponse(e,n,t)}else{i=ew._fromJSON(e,t)}if(n!==r){o=i}r=n;break}}catch(e){}}const a=i.filter(e=>e._shouldAllowMigration);if(!r._shouldAllowMigration||!a.length){return new eP(r,e,n)}r=a[0];if(o){await r._set(s,o.toJSON())}await Promise.all(t.map(async e=>{if(e!==r){try{await e._remove(s)}catch(e){}}}));return new eP(r,e,n)}}function eN(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/")){return"Opera"}else if(eD(t)){return"IEMobile"}else if(t.includes("msie")||t.includes("trident/")){return"IE"}else if(t.includes("edge/")){return"Edge"}else if(eO(t)){return"Firefox"}else if(t.includes("silk/")){return"Silk"}else if(eM(t)){return"Blackberry"}else if(eU(t)){return"Webos"}else if(eb(t)){return"Safari"}else if((t.includes("chrome/")||eC(t))&&!t.includes("edge/")){return"Chrome"}else if(eL(t)){return"Android"}else{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/;const n=e.match(t);if((n===null||n===void 0?void 0:n.length)===2){return n[1]}}return"Other"}function eO(e=(0,r.ZQ)()){return/firefox\//i.test(e)}function eb(e=(0,r.ZQ)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function eC(e=(0,r.ZQ)()){return/crios\//i.test(e)}function eD(e=(0,r.ZQ)()){return/iemobile/i.test(e)}function eL(e=(0,r.ZQ)()){return/android/i.test(e)}function eM(e=(0,r.ZQ)()){return/blackberry/i.test(e)}function eU(e=(0,r.ZQ)()){return/webos/i.test(e)}function eF(e=(0,r.ZQ)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function eV(e=getUA()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function ex(e=(0,r.ZQ)()){var t;return eF(e)&&!!((t=window.navigator)===null||t===void 0?void 0:t.standalone)}function ej(){return(0,r.lT)()&&document.documentMode===10}function eH(e=(0,r.ZQ)()){return eF(e)||eL(e)||eU(e)||eM(e)||/windows phone/i.test(e)||eD(e)}function eq(e,t=[]){let n;switch(e){case"Browser":n=eN((0,r.ZQ)());break;case"Worker":n=`${eN((0,r.ZQ)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/${"JsCore"}/${i.MF}/${s}`}class eW{constructor(e){this.auth=e;this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,i)=>{try{const i=e(t);n(i)}catch(e){i(e)}});n.onAbort=t;this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e){return}const t=[];try{for(const n of this.queue){await n(e);if(n.onAbort){t.push(n.onAbort)}}}catch(e){t.reverse();for(const e of t){try{e()}catch(e){}}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e===null||e===void 0?void 0:e.message})}}}async function ez(e,t={}){return W(e,"GET","/v2/passwordPolicy",q(e,t))}const eG=6;class eK{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={};this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:eG;if(s.maxPasswordLength){this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength}if(s.containsLowercaseCharacter!==undefined){this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter}if(s.containsUppercaseCharacter!==undefined){this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter}if(s.containsNumericCharacter!==undefined){this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter}if(s.containsNonAlphanumericCharacter!==undefined){this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter}this.enforcementState=e.enforcementState;if(this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"){this.enforcementState="OFF"}this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"";this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:false;this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:true,passwordPolicy:this};this.validatePasswordLengthOptions(e,a);this.validatePasswordCharacterOptions(e,a);a.isValid&&(a.isValid=(t=a.meetsMinPasswordLength)!==null&&t!==void 0?t:true);a.isValid&&(a.isValid=(n=a.meetsMaxPasswordLength)!==null&&n!==void 0?n:true);a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:true);a.isValid&&(a.isValid=(r=a.containsUppercaseLetter)!==null&&r!==void 0?r:true);a.isValid&&(a.isValid=(s=a.containsNumericCharacter)!==null&&s!==void 0?s:true);a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:true);return a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength;const i=this.customStrengthOptions.maxPasswordLength;if(n){t.meetsMinPasswordLength=e.length>=n}if(i){t.meetsMaxPasswordLength=e.length<=i}}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,false,false,false,false);let n;for(let i=0;i<e.length;i++){n=e.charAt(i);this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){if(this.customStrengthOptions.containsLowercaseLetter){e.containsLowercaseLetter||(e.containsLowercaseLetter=t)}if(this.customStrengthOptions.containsUppercaseLetter){e.containsUppercaseLetter||(e.containsUppercaseLetter=n)}if(this.customStrengthOptions.containsNumericCharacter){e.containsNumericCharacter||(e.containsNumericCharacter=i)}if(this.customStrengthOptions.containsNonAlphanumericCharacter){e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r)}}}class e${constructor(e,t,n,i){this.app=e;this.heartbeatServiceProvider=t;this.appCheckServiceProvider=n;this.config=i;this.currentUser=null;this.emulatorConfig=null;this.operations=Promise.resolve();this.authStateSubscription=new eJ(this);this.idTokenSubscription=new eJ(this);this.beforeStateQueue=new eW(this);this.redirectUser=null;this.isProactiveRefreshEnabled=false;this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1;this._canInitEmulator=true;this._isInitialized=false;this._deleted=false;this._initializationPromise=null;this._popupRedirectResolver=null;this._errorFactory=v;this._agentRecaptchaConfig=null;this._tenantRecaptchaConfigs={};this._projectPasswordPolicy=null;this._tenantPasswordPolicies={};this._resolvePersistenceManagerAvailable=undefined;this.lastNotifiedUid=undefined;this.languageCode=null;this.tenantId=null;this.settings={appVerificationDisabledForTesting:false};this.frameworks=[];this.name=e.name;this.clientVersion=i.sdkClientVersion;this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){if(t){this._popupRedirectResolver=eA(t)}this._initializationPromise=this.queue(async()=>{var n,i,r;if(this._deleted){return}this.persistenceManager=await eP.create(this,e);(n=this._resolvePersistenceManagerAvailable)===null||n===void 0?void 0:n.call(this);if(this._deleted){return}if((i=this._popupRedirectResolver)===null||i===void 0?void 0:i._shouldInitProactively){try{await this._popupRedirectResolver._initialize(this)}catch(e){}}await this.initializeCurrentUser(t);this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null;if(this._deleted){return}this._isInitialized=true});return this._initializationPromise}async _onStorageEvent(){if(this._deleted){return}const e=await this.assertedPersistence.getCurrentUser();if(!this.currentUser&&!e){return}if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e);await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,true)}async initializeCurrentUserFromIdToken(e){try{const t=await ei(this,{idToken:e});const n=await ew._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e);await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,i.xZ)(this.app)){const e=this.app.settings.authIdToken;if(e){return new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))})}else{return this.directlySetCurrentUser(null)}}const n=await this.assertedPersistence.getCurrentUser();let r=n;let s=false;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId;const i=r===null||r===void 0?void 0:r._redirectEventId;const o=await this.tryRedirectSignIn(e);if((!n||n===i)&&(o===null||o===void 0?void 0:o.user)){r=o.user;s=true}}if(!r){return this.directlySetCurrentUser(null)}if(!r._redirectEventId){if(s){try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n;this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}}if(r){return this.reloadAndSetCurrentUserOrClear(r)}else{return this.directlySetCurrentUser(null)}}P(this._popupRedirectResolver,this,"argument-error");await this.getOrInitRedirectPersistenceManager();if(this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId){return this.directlySetCurrentUser(r)}return this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,true)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ef(e)}catch(e){if((e===null||e===void 0?void 0:e.code)!==`auth/${"network-request-failed"}`){return this.directlySetCurrentUser(null)}}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=M()}async _delete(){this._deleted=true}async updateCurrentUser(e){if((0,i.xZ)(this.app)){return Promise.reject(S(this))}const t=e?(0,r.Ku)(e):null;if(t){P(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token")}return this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=false){if(this._deleted){return}if(e){P(this.tenantId===e.tenantId,this,"tenant-id-mismatch")}if(!t){await this.beforeStateQueue.runMiddleware(e)}return this.queue(async()=>{await this.directlySetCurrentUser(e);this.notifyAuthListeners()})}async signOut(){if((0,i.xZ)(this.app)){return Promise.reject(S(this))}await this.beforeStateQueue.runMiddleware(null);if(this.redirectPersistenceManager||this._popupRedirectResolver){await this._setRedirectUser(null)}return this._updateCurrentUser(null,true)}setPersistence(e){if((0,i.xZ)(this.app)){return Promise.reject(S(this))}return this.queue(async()=>{await this.assertedPersistence.setPersistence(eA(e))})}_getRecaptchaConfig(){if(this.tenantId==null){return this._agentRecaptchaConfig}else{return this._tenantRecaptchaConfigs[this.tenantId]}}async validatePassword(e){if(!this._getPasswordPolicyInternal()){await this._updatePasswordPolicy()}const t=this._getPasswordPolicyInternal();if(t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){return Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{}))}return t.validatePassword(e)}_getPasswordPolicyInternal(){if(this.tenantId===null){return this._projectPasswordPolicy}else{return this._tenantPasswordPolicies[this.tenantId]}}async _updatePasswordPolicy(){const e=await ez(this);const t=new eK(e);if(this.tenantId===null){this._projectPasswordPolicy=t}else{this._tenantPasswordPolicies[this.tenantId]=t}}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new r.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser){e()}else{const n=this.onAuthStateChanged(()=>{n();e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken();const n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};if(this.tenantId!=null){n.tenantId=this.tenantId}await e_(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&eA(e)||this._popupRedirectResolver;P(t,this,"argument-error");this.redirectPersistenceManager=await eP.create(this,[eA(t._redirectPersistence)],"redirectUser");this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;if(this._isInitialized){await this.queue(async()=>{})}if(((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e){return this._currentUser}if(((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e){return this.redirectUser}return null}async _persistUserIfCurrent(e){if(e===this.currentUser){return this.queue(async()=>this.directlySetCurrentUser(e))}}_notifyListenersIfCurrent(e){if(e===this.currentUser){this.notifyAuthListeners()}}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=true;if(this.currentUser){this._currentUser._startProactiveRefresh()}}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=false;if(this.currentUser){this._currentUser._stopProactiveRefresh()}}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized){return}this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;if(this.lastNotifiedUid!==n){this.lastNotifiedUid=n;this.authStateSubscription.next(this.currentUser)}}registerStateListener(e,t,n,i){if(this._deleted){return()=>{}}const r=typeof t==="function"?t:t.next.bind(t);let s=false;const o=this._isInitialized?Promise.resolve():this._initializationPromise;P(o,this,"internal-error");o.then(()=>{if(s){return}r(this.currentUser)});if(typeof t==="function"){const r=e.addObserver(t,n,i);return()=>{s=true;r()}}else{const n=e.addObserver(t);return()=>{s=true;n()}}}async directlySetCurrentUser(e){if(this.currentUser&&this.currentUser!==e){this._currentUser._stopProactiveRefresh()}if(e&&this.isProactiveRefreshEnabled){e._startProactiveRefresh()}this.currentUser=e;if(e){await this.assertedPersistence.setCurrentUser(e)}else{await this.assertedPersistence.removeCurrentUser()}}queue(e){this.operations=this.operations.then(e,e);return this.operations}get assertedPersistence(){P(this.persistenceManager,this,"internal-error");return this.persistenceManager}_logFramework(e){if(!e||this.frameworks.includes(e)){return}this.frameworks.push(e);this.frameworks.sort();this.clientVersion=eq(this.config.clientPlatform,this._getFrameworks())}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};if(this.app.options.appId){t["X-Firebase-gmpid"]=this.app.options.appId}const n=await ((e=this.heartbeatServiceProvider.getImmediate({optional:true}))===null||e===void 0?void 0:e.getHeartbeatsHeader());if(n){t["X-Firebase-Client"]=n}const i=await this._getAppCheckToken();if(i){t["X-Firebase-AppCheck"]=i}return t}async _getAppCheckToken(){var e;if((0,i.xZ)(this.app)&&this.app.settings.appCheckToken){return this.app.settings.appCheckToken}const t=await ((e=this.appCheckServiceProvider.getImmediate({optional:true}))===null||e===void 0?void 0:e.getToken());if(t===null||t===void 0?void 0:t.error){T(`Error while retrieving App Check token: ${t.error}`)}return t===null||t===void 0?void 0:t.token}}function eB(e){return(0,r.Ku)(e)}class eJ{constructor(e){this.auth=e;this.observer=null;this.addObserver=(0,r.tD)(e=>this.observer=e)}get next(){P(this.observer,this.auth,"internal-error");return this.observer.next.bind(this.observer)}}let eY={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eZ(e){eY=e}function eQ(e){return eY.loadJS(e)}function eX(){return eY.recaptchaV2Script}function e0(){return eY.recaptchaEnterpriseScript}function e1(){return eY.gapiScript}function e3(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const e2=500;const e6=6e4;const e4=1e12;class e5{constructor(e){this.auth=e;this.counter=e4;this._widgets=new Map}render(e,t){const n=this.counter;this._widgets.set(n,new e7(e,this.auth.name,t||{}));this.counter++;return n}reset(e){var t;const n=e||e4;void((t=this._widgets.get(n))===null||t===void 0?void 0:t.delete());this._widgets.delete(n)}getResponse(e){var t;const n=e||e4;return((t=this._widgets.get(n))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const n=e||e4;void((t=this._widgets.get(n))===null||t===void 0?void 0:t.execute());return""}}class e9{constructor(){this.enterprise=new e8}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class e8{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class e7{constructor(e,t,n){this.params=n;this.timerId=null;this.deleted=false;this.responseToken=null;this.clickHandler=()=>{this.execute()};const i=typeof e==="string"?document.getElementById(e):e;P(i,"argument-error",{appName:t});this.container=i;this.isVisible=this.params.size!=="invisible";if(this.isVisible){this.execute()}else{this.container.addEventListener("click",this.clickHandler)}}getResponse(){this.checkIfDeleted();return this.responseToken}delete(){this.checkIfDeleted();this.deleted=true;if(this.timerId){clearTimeout(this.timerId);this.timerId=null}this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted();if(this.timerId){return}this.timerId=window.setTimeout(()=>{this.responseToken=te(50);const{callback:e,"expired-callback":t}=this.params;if(e){try{e(this.responseToken)}catch(e){}}this.timerId=window.setTimeout(()=>{this.timerId=null;this.responseToken=null;if(t){try{t()}catch(e){}}if(this.isVisible){this.execute()}},e6)},e2)}checkIfDeleted(){if(this.deleted){throw new Error("reCAPTCHA mock was already deleted!")}}}function te(e){const t=[];const n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++){t.push(n.charAt(Math.floor(Math.random()*n.length)))}return t.join("")}const tt="recaptcha-enterprise";const tn="NO_RECAPTCHA";class ti{constructor(e){this.type=tt;this.auth=eB(e)}async verify(e="verify",t=false){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null){return e._agentRecaptchaConfig.siteKey}if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==undefined){return e._tenantRecaptchaConfigs[e.tenantId].siteKey}}return new Promise(async(t,n)=>{ee(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(i.recaptchaKey===undefined){n(new Error("recaptcha Enterprise site key undefined"))}else{const n=new Q(i);if(e.tenantId==null){e._agentRecaptchaConfig=n}else{e._tenantRecaptchaConfigs[e.tenantId]=n}return t(n.siteKey)}}).catch(e=>{n(e)})})}function i(t,n,i){const r=window.grecaptcha;if(Z(r)){r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(tn)})})}else{i(Error("No reCAPTCHA enterprise script loaded."))}}if(this.auth.settings.appVerificationDisabledForTesting){const e=new e9;return e.execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{n(this.auth).then(n=>{if(!t&&Z(window.grecaptcha)){i(n,e,r)}else{if(typeof window==="undefined"){r(new Error("RecaptchaVerifier is only supported in browser"));return}let t=e0();if(t.length!==0){t+=n}eQ(t).then(()=>{i(n,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function tr(e,t,n,i=false,r=false){const s=new ti(e);let o;if(r){o=tn}else{try{o=await s.verify(n)}catch(e){o=await s.verify(n,true)}}const a=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber;const t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{"phoneEnrollmentInfo":{phoneNumber:e,recaptchaToken:t,captchaResponse:o,"clientType":"CLIENT_TYPE_WEB","recaptchaVersion":"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{"phoneSignInInfo":{recaptchaToken:e,captchaResponse:o,"clientType":"CLIENT_TYPE_WEB","recaptchaVersion":"RECAPTCHA_ENTERPRISE"}})}return a}if(!i){Object.assign(a,{captchaResponse:o})}else{Object.assign(a,{"captchaResp":o})}Object.assign(a,{"clientType":"CLIENT_TYPE_WEB"});Object.assign(a,{"recaptchaVersion":"RECAPTCHA_ENTERPRISE"});return a}async function ts(e,t,n,i,r){var s,o;if(r==="EMAIL_PASSWORD_PROVIDER"){if((s=e._getRecaptchaConfig())===null||s===void 0?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await tr(e,t,n,n==="getOobCode");return i(e,r)}else{return i(e,t).catch(async r=>{if(r.code===`auth/${"missing-recaptcha-token"}`){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await tr(e,t,n,n==="getOobCode");return i(e,r)}else{return Promise.reject(r)}})}}else if(r==="PHONE_PROVIDER"){if((o=e._getRecaptchaConfig())===null||o===void 0?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const r=await tr(e,t,n);return i(e,r).catch(async r=>{var s;if(((s=e._getRecaptchaConfig())===null||s===void 0?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"){if(r.code===`auth/${"missing-recaptcha-token"}`||r.code===`auth/${"invalid-app-credential"}`){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const r=await tr(e,t,n,false,true);return i(e,r)}}return Promise.reject(r)})}else{const r=await tr(e,t,n,false,true);return i(e,r)}}else{return Promise.reject(r+" provider is not supported.")}}async function to(e){const t=eB(e);const n=await ee(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});const i=new Q(n);if(t.tenantId==null){t._agentRecaptchaConfig=i}else{t._tenantRecaptchaConfigs[t.tenantId]=i}if(i.isAnyProviderEnabled()){const e=new ti(t);void e.verify()}}function ta(e,t){const n=(0,i.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate();const i=n.getOptions();if((0,r.bD)(i,t!==null&&t!==void 0?t:{})){return e}else{w(e,"already-initialized")}}const s=n.initialize({options:t});return s}function tc(e,t){const n=(t===null||t===void 0?void 0:t.persistence)||[];const i=(Array.isArray(n)?n:[n]).map(eA);if(t===null||t===void 0?void 0:t.errorMap){e._updateErrorMap(t.errorMap)}e._initializeWithPersistence(i,t===null||t===void 0?void 0:t.popupRedirectResolver)}function tu(e,t,n){const i=eB(e);P(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!(n===null||n===void 0?void 0:n.disableWarnings);const o=tl(t);const{host:a,port:c}=td(t);const u=c===null?"":`:${c}`;const l={url:`${o}//${a}${u}/`};const d=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){P(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed");P((0,r.bD)(l,i.config.emulator)&&(0,r.bD)(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=l;i.emulatorConfig=d;i.settings.appVerificationDisabledForTesting=true;if((0,r.zJ)(a)){void(0,r.gE)(`${o}//${a}${u}`);(0,r.P1)("Auth",true)}else if(!s){tp()}}function tl(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function td(e){const t=tl(e);const n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n){return{host:"",port:null}}const i=n[2].split("@").pop()||"";const r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:th(i.substr(e.length+1))}}else{const[e,t]=i.split(":");return{host:e,port:th(t)}}}function th(e){if(!e){return null}const t=Number(e);if(isNaN(t)){return null}return t}function tp(){function e(){const e=document.createElement("p");const t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.";t.position="fixed";t.width="100%";t.backgroundColor="#ffffff";t.border=".1em solid #000000";t.color="#b50000";t.bottom="0px";t.left="0px";t.margin="0px";t.zIndex="10000";t.textAlign="center";e.classList.add("firebase-emulator-warning");document.body.appendChild(e)}if(typeof console!=="undefined"&&typeof console.info==="function"){console.info("WARNING: You are using the Auth Emulator,"+" which is intended for local testing only.  Do not use with"+" production credentials.")}if(typeof window!=="undefined"&&typeof document!=="undefined"){if(document.readyState==="loading"){window.addEventListener("DOMContentLoaded",e)}else{e()}}}class tf{constructor(e,t){this.providerId=e;this.signInMethod=t}toJSON(){return N("not implemented")}_getIdTokenResponse(e){return N("not implemented")}_linkToIdToken(e,t){return N("not implemented")}_getReauthenticationResolver(e){return N("not implemented")}}async function tm(e,t){return W(e,"POST","/v1/accounts:resetPassword",q(e,t))}async function tg(e,t){return W(e,"POST","/v1/accounts:update",t)}async function tv(e,t){return W(e,"POST","/v1/accounts:signUp",t)}async function tI(e,t){return W(e,"POST","/v1/accounts:update",q(e,t))}async function t_(e,t){return G(e,"POST","/v1/accounts:signInWithPassword",q(e,t))}async function tT(e,t){return W(e,"POST","/v1/accounts:sendOobCode",q(e,t))}async function tE(e,t){return tT(e,t)}async function tw(e,t){return tT(e,t)}async function ty(e,t){return tT(e,t)}async function tA(e,t){return tT(e,t)}async function tS(e,t){return G(e,"POST","/v1/accounts:signInWithEmailLink",q(e,t))}async function tR(e,t){return G(e,"POST","/v1/accounts:signInWithEmailLink",q(e,t))}class tk extends tf{constructor(e,t,n,i=null){super("password",n);this._email=e;this._password=t;this._tenantId=i}static _fromEmailAndPassword(e,t){return new tk(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new tk(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e==="string"?JSON.parse(e):e;if((t===null||t===void 0?void 0:t.email)&&(t===null||t===void 0?void 0:t.password)){if(t.signInMethod==="password"){return this._fromEmailAndPassword(t.email,t.password)}else if(t.signInMethod==="emailLink"){return this._fromEmailAndCode(t.email,t.password,t.tenantId)}}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:true,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ts(e,t,"signInWithPassword",t_,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tS(e,{email:this._email,oobCode:this._password});default:w(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:true,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ts(e,n,"signUpPassword",tv,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tR(e,{idToken:t,email:this._email,oobCode:this._password});default:w(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function tP(e,t){return G(e,"POST","/v1/accounts:signInWithIdp",q(e,t))}const tN="http://localhost";class tO extends tf{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){const t=new tO(e.providerId,e.signInMethod);if(e.idToken||e.accessToken){if(e.idToken){t.idToken=e.idToken}if(e.accessToken){t.accessToken=e.accessToken}if(e.nonce&&!e.pendingToken){t.nonce=e.nonce}if(e.pendingToken){t.pendingToken=e.pendingToken}}else if(e.oauthToken&&e.oauthTokenSecret){t.accessToken=e.oauthToken;t.secret=e.oauthTokenSecret}else{w("argument-error")}return t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e==="string"?JSON.parse(e):e;const{providerId:n,signInMethod:i}=t,r=(0,o.Tt)(t,["providerId","signInMethod"]);if(!n||!i){return null}const s=new tO(n,i);s.idToken=r.idToken||undefined;s.accessToken=r.accessToken||undefined;s.secret=r.secret;s.nonce=r.nonce;s.pendingToken=r.pendingToken||null;return s}_getIdTokenResponse(e){const t=this.buildRequest();return tP(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();n.idToken=t;return tP(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();t.autoCreate=false;return tP(e,t)}buildRequest(){const e={requestUri:tN,returnSecureToken:true};if(this.pendingToken){e.pendingToken=this.pendingToken}else{const t={};if(this.idToken){t["id_token"]=this.idToken}if(this.accessToken){t["access_token"]=this.accessToken}if(this.secret){t["oauth_token_secret"]=this.secret}t["providerId"]=this.providerId;if(this.nonce&&!this.pendingToken){t["nonce"]=this.nonce}e.postBody=(0,r.Am)(t)}return e}}async function tb(e,t){return W(e,"POST","/v1/accounts:sendVerificationCode",q(e,t))}async function tC(e,t){return G(e,"POST","/v1/accounts:signInWithPhoneNumber",q(e,t))}async function tD(e,t){const n=await G(e,"POST","/v1/accounts:signInWithPhoneNumber",q(e,t));if(n.temporaryProof){throw J(e,"account-exists-with-different-credential",n)}return n}const tL={["USER_NOT_FOUND"]:"user-not-found"};async function tM(e,t){const n=Object.assign(Object.assign({},t),{operation:"REAUTH"});return G(e,"POST","/v1/accounts:signInWithPhoneNumber",q(e,n),tL)}class tU extends tf{constructor(e){super("phone","phone");this.params=e}static _fromVerification(e,t){return new tU({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new tU({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return tC(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return tD(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return tM(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;if(e&&t){return{temporaryProof:e,phoneNumber:t}}return{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};if(this.params.phoneNumber){e.phoneNumber=this.params.phoneNumber}if(this.params.temporaryProof){e.temporaryProof=this.params.temporaryProof}if(this.params.verificationCode){e.verificationCode=this.params.verificationCode}if(this.params.verificationId){e.verificationId=this.params.verificationId}return e}static fromJSON(e){if(typeof e==="string"){e=JSON.parse(e)}const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;if(!n&&!t&&!i&&!r){return null}return new tU({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r})}}function tF(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tV(e){const t=(0,r.I9)((0,r.hp)(e))["link"];const n=t?(0,r.I9)((0,r.hp)(t))["deep_link_id"]:null;const i=(0,r.I9)((0,r.hp)(e))["deep_link_id"];const s=i?(0,r.I9)((0,r.hp)(i))["link"]:null;return s||i||n||t||e}class tx{constructor(e){var t,n,i,s,o,a;const c=(0,r.I9)((0,r.hp)(e));const u=(t=c["apiKey"])!==null&&t!==void 0?t:null;const l=(n=c["oobCode"])!==null&&n!==void 0?n:null;const d=tF((i=c["mode"])!==null&&i!==void 0?i:null);P(u&&l&&d,"argument-error");this.apiKey=u;this.operation=d;this.code=l;this.continueUrl=(s=c["continueUrl"])!==null&&s!==void 0?s:null;this.languageCode=(o=c["lang"])!==null&&o!==void 0?o:null;this.tenantId=(a=c["tenantId"])!==null&&a!==void 0?a:null}static parseLink(e){const t=tV(e);try{return new tx(t)}catch(e){return null}}}function tj(e){return tx.parseLink(e)}class tH{constructor(){this.providerId=tH.PROVIDER_ID}static credential(e,t){return tk._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=tx.parseLink(t);P(n,"argument-error");return tk._fromEmailAndCode(e,n.code,n.tenantId)}}tH.PROVIDER_ID="password";tH.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tH.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tq{constructor(e){this.providerId=e;this.defaultLanguageCode=null;this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){this.customParameters=e;return this}getCustomParameters(){return this.customParameters}}class tW extends tq{constructor(){super(...arguments);this.scopes=[]}addScope(e){if(!this.scopes.includes(e)){this.scopes.push(e)}return this}getScopes(){return[...this.scopes]}}class tz extends(null&&tW){static credentialFromJSON(e){const t=typeof e==="string"?JSON.parse(e):e;P("providerId"in t&&"signInMethod"in t,"argument-error");return tO._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){P(e.idToken||e.accessToken,"argument-error");return tO._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return tz.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return tz.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e){return null}const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=e;if(!n&&!i&&!t&&!r){return null}if(!o){return null}try{return new tz(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:r})}catch(e){return null}}}class tG extends tW{constructor(){super("facebook.com")}static credential(e){return tO._fromParams({providerId:tG.PROVIDER_ID,signInMethod:tG.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tG.credentialFromTaggedObject(e)}static credentialFromError(e){return tG.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)){return null}if(!e.oauthAccessToken){return null}try{return tG.credential(e.oauthAccessToken)}catch(e){return null}}}tG.FACEBOOK_SIGN_IN_METHOD="facebook.com";tG.PROVIDER_ID="facebook.com";class tK extends tW{constructor(){super("google.com");this.addScope("profile")}static credential(e,t){return tO._fromParams({providerId:tK.PROVIDER_ID,signInMethod:tK.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return tK.credentialFromTaggedObject(e)}static credentialFromError(e){return tK.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e){return null}const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n){return null}try{return tK.credential(t,n)}catch(e){return null}}}tK.GOOGLE_SIGN_IN_METHOD="google.com";tK.PROVIDER_ID="google.com";class t$ extends tW{constructor(){super("github.com")}static credential(e){return tO._fromParams({providerId:t$.PROVIDER_ID,signInMethod:t$.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t$.credentialFromTaggedObject(e)}static credentialFromError(e){return t$.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)){return null}if(!e.oauthAccessToken){return null}try{return t$.credential(e.oauthAccessToken)}catch(e){return null}}}t$.GITHUB_SIGN_IN_METHOD="github.com";t$.PROVIDER_ID="github.com";const tB="http://localhost";class tJ extends tf{constructor(e,t){super(e,e);this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return tP(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();n.idToken=t;return tP(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();t.autoCreate=false;return tP(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e==="string"?JSON.parse(e):e;const{providerId:n,signInMethod:i,pendingToken:r}=t;if(!n||!i||!r||n!==i){return null}return new tJ(n,r)}static _create(e,t){return new tJ(e,t)}buildRequest(){return{requestUri:tB,returnSecureToken:true,pendingToken:this.pendingToken}}}const tY="saml.";class tZ extends tq{constructor(e){P(e.startsWith(tY),"argument-error");super(e)}static credentialFromResult(e){return tZ.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return tZ.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=tJ.fromJSON(e);P(t,"argument-error");return t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e){return null}const{pendingToken:t,providerId:n}=e;if(!t||!n){return null}try{return tJ._create(n,t)}catch(e){return null}}}class tQ extends tW{constructor(){super("twitter.com")}static credential(e,t){return tO._fromParams({providerId:tQ.PROVIDER_ID,signInMethod:tQ.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return tQ.credentialFromTaggedObject(e)}static credentialFromError(e){return tQ.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e){return null}const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n){return null}try{return tQ.credential(t,n)}catch(e){return null}}}tQ.TWITTER_SIGN_IN_METHOD="twitter.com";tQ.PROVIDER_ID="twitter.com";async function tX(e,t){return G(e,"POST","/v1/accounts:signUp",q(e,t))}class t0{constructor(e){this.user=e.user;this.providerId=e.providerId;this._tokenResponse=e._tokenResponse;this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=false){const r=await ew._fromIdTokenResponse(e,n,i);const s=t1(n);const o=new t0({user:r,providerId:s,_tokenResponse:n,operationType:t});return o}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,true);const i=t1(n);return new t0({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function t1(e){if(e.providerId){return e.providerId}if("phoneNumber"in e){return"phone"}return null}async function t3(e){var t;if(_isFirebaseServerApp(e.app)){return Promise.reject(S(e))}const n=eB(e);await n._initializationPromise;if((t=n.currentUser)===null||t===void 0?void 0:t.isAnonymous){return new t0({user:n.currentUser,providerId:null,operationType:"signIn"})}const i=await tX(n,{returnSecureToken:true});const r=await t0._fromIdTokenResponse(n,"signIn",i,true);await n._updateCurrentUser(r.user);return r}class t2 extends r.g{constructor(e,t,n,i){var r;super(t.code,t.message);this.operationType=n;this.user=i;Object.setPrototypeOf(this,t2.prototype);this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:undefined,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new t2(e,t,n,i)}}function t6(e,t,n,i){const r=t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e);return r.catch(n=>{if(n.code===`auth/${"multi-factor-auth-required"}`){throw t2._fromErrorAndOperation(e,n,t,i)}throw n})}function t4(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}async function t5(e,t){const n=getModularInstance(e);await t8(true,n,t);const{providerUserInfo:i}=await en(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]});const r=t4(i||[]);n.providerData=n.providerData.filter(e=>r.has(e.providerId));if(!r.has("phone")){n.phoneNumber=null}await n.auth._persistUserIfCurrent(n);return n}async function t9(e,t,n=false){const i=await el(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return t0._forOperation(e,"link",i)}async function t8(e,t,n){await ef(t);const i=t4(t.providerData);const r=e===false?"provider-already-linked":"no-such-provider";P(i.has(n)===e,t.auth,r)}async function t7(e,t,n=false){const{auth:r}=e;if((0,i.xZ)(r.app)){return Promise.reject(S(r))}const s="reauthenticate";try{const i=await el(e,t6(r,s,t,e),n);P(i.idToken,r,"internal-error");const o=ec(i.idToken);P(o,r,"internal-error");const{sub:a}=o;P(e.uid===a,r,"user-mismatch");return t0._forOperation(e,s,i)}catch(e){if((e===null||e===void 0?void 0:e.code)===`auth/${"user-not-found"}`){w(r,"user-mismatch")}throw e}}async function ne(e,t,n=false){if((0,i.xZ)(e.app)){return Promise.reject(S(e))}const r="signIn";const s=await t6(e,r,t);const o=await t0._fromIdTokenResponse(e,r,s);if(!n){await e._updateCurrentUser(o.user)}return o}async function nt(e,t){return ne(eB(e),t)}async function nn(e,t){const n=getModularInstance(e);await t8(false,n,t.providerId);return t9(n,t)}async function ni(e,t){return t7(getModularInstance(e),t)}async function nr(e,t){return G(e,"POST","/v1/accounts:signInWithCustomToken",q(e,t))}async function ns(e,t){if(_isFirebaseServerApp(e.app)){return Promise.reject(S(e))}const n=eB(e);const i=await nr(n,{token:t,returnSecureToken:true});const r=await t0._fromIdTokenResponse(n,"signIn",i);await n._updateCurrentUser(r.user);return r}class no{constructor(e,t){this.factorId=e;this.uid=t.mfaEnrollmentId;this.enrollmentTime=new Date(t.enrolledAt).toUTCString();this.displayName=t.displayName}static _fromServerResponse(e,t){if("phoneInfo"in t){return na._fromServerResponse(e,t)}else if("totpInfo"in t){return nc._fromServerResponse(e,t)}return w(e,"internal-error")}}class na extends no{constructor(e){super("phone",e);this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new na(t)}}class nc extends no{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new nc(t)}}function nu(e,t,n){var i;P(((i=n.url)===null||i===void 0?void 0:i.length)>0,e,"invalid-continue-uri");P(typeof n.dynamicLinkDomain==="undefined"||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain");P(typeof n.linkDomain==="undefined"||n.linkDomain.length>0,e,"invalid-hosting-link-domain");t.continueUrl=n.url;t.dynamicLinkDomain=n.dynamicLinkDomain;t.linkDomain=n.linkDomain;t.canHandleCodeInApp=n.handleCodeInApp;if(n.iOS){P(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id");t.iOSBundleId=n.iOS.bundleId}if(n.android){P(n.android.packageName.length>0,e,"missing-android-pkg-name");t.androidInstallApp=n.android.installApp;t.androidMinimumVersionCode=n.android.minimumVersion;t.androidPackageName=n.android.packageName}}async function nl(e){const t=eB(e);if(t._getPasswordPolicyInternal()){await t._updatePasswordPolicy()}}async function nd(e,t,n){const i=eB(e);const r={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(n){nu(i,r,n)}await ts(i,r,"getOobCode",tw,"EMAIL_PASSWORD_PROVIDER")}async function nh(e,t,n){await tm(getModularInstance(e),{oobCode:t,newPassword:n}).catch(async t=>{if(t.code===`auth/${"password-does-not-meet-requirements"}`){void nl(e)}throw t})}async function np(e,t){await tI(getModularInstance(e),{oobCode:t})}async function nf(e,t){const n=getModularInstance(e);const i=await tm(n,{oobCode:t});const r=i.requestType;P(r,n,"internal-error");switch(r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":P(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":P(i.mfaInfo,n,"internal-error");default:P(i.email,n,"internal-error")}let s=null;if(i.mfaInfo){s=no._fromServerResponse(eB(n),i.mfaInfo)}return{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function nm(e,t){const{data:n}=await nf(getModularInstance(e),t);return n.email}async function ng(e,t,n){if(_isFirebaseServerApp(e.app)){return Promise.reject(S(e))}const i=eB(e);const r={returnSecureToken:true,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};const s=ts(i,r,"signUpPassword",tX,"EMAIL_PASSWORD_PROVIDER");const o=await s.catch(t=>{if(t.code===`auth/${"password-does-not-meet-requirements"}`){void nl(e)}throw t});const a=await t0._fromIdTokenResponse(i,"signIn",o);await i._updateCurrentUser(a.user);return a}function nv(e,t,n){if(_isFirebaseServerApp(e.app)){return Promise.reject(S(e))}return nt(getModularInstance(e),tH.credential(t,n)).catch(async t=>{if(t.code===`auth/${"password-does-not-meet-requirements"}`){void nl(e)}throw t})}async function nI(e,t,n){const i=eB(e);const r={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function s(e,t){P(t.handleCodeInApp,i,"argument-error");if(t){nu(i,e,t)}}s(r,n);await ts(i,r,"getOobCode",ty,"EMAIL_PASSWORD_PROVIDER")}function n_(e,t){const n=tx.parseLink(t);return(n===null||n===void 0?void 0:n.operation)==="EMAIL_SIGNIN"}async function nT(e,t,n){if(_isFirebaseServerApp(e.app)){return Promise.reject(S(e))}const i=getModularInstance(e);const r=tH.credentialWithLink(t,n||b());P(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch");return nt(i,r)}async function nE(e,t){return W(e,"POST","/v1/accounts:createAuthUri",q(e,t))}async function nw(e,t){const n=C()?b():"http://localhost";const i={identifier:t,continueUri:n};const{signinMethods:r}=await nE(getModularInstance(e),i);return r||[]}async function ny(e,t){const n=getModularInstance(e);const i=await e.getIdToken();const r={requestType:"VERIFY_EMAIL",idToken:i};if(t){nu(n.auth,r,t)}const{email:s}=await tE(n.auth,r);if(s!==e.email){await e.reload()}}async function nA(e,t,n){const i=getModularInstance(e);const r=await e.getIdToken();const s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:r,newEmail:t};if(n){nu(i.auth,s,n)}const{email:o}=await tA(i.auth,s);if(o!==e.email){await e.reload()}}async function nS(e,t){return W(e,"POST","/v1/accounts:update",t)}async function nR(e,{displayName:t,photoURL:n}){if(t===undefined&&n===undefined){return}const i=getModularInstance(e);const r=await i.getIdToken();const s={idToken:r,displayName:t,photoUrl:n,returnSecureToken:true};const o=await el(i,nS(i.auth,s));i.displayName=o.displayName||null;i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:e})=>e==="password");if(a){a.displayName=i.displayName;a.photoURL=i.photoURL}await i._updateTokensIfNecessary(o)}function nk(e,t){const n=getModularInstance(e);if(_isFirebaseServerApp(n.auth.app)){return Promise.reject(S(n.auth))}return nN(n,t,null)}function nP(e,t){return nN(getModularInstance(e),null,t)}async function nN(e,t,n){const{auth:i}=e;const r=await e.getIdToken();const s={idToken:r,returnSecureToken:true};if(t){s.email=t}if(n){s.password=n}const o=await el(e,tg(i,s));await e._updateTokensIfNecessary(o,true)}function nO(e){var t,n;if(!e){return null}const{providerId:i}=e;const r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{};const s=e.isNewUser||e.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(e===null||e===void 0?void 0:e.idToken)){const i=(n=(t=ec(e.idToken))===null||t===void 0?void 0:t.firebase)===null||n===void 0?void 0:n["sign_in_provider"];if(i){const e=i!=="anonymous"&&i!=="custom"?i:null;return new nb(s,e)}}if(!i){return null}switch(i){case"facebook.com":return new nD(s,r);case"github.com":return new nL(s,r);case"google.com":return new nM(s,r);case"twitter.com":return new nU(s,r,e.screenName||null);case"custom":case"anonymous":return new nb(s,null);default:return new nb(s,i,r)}}class nb{constructor(e,t,n={}){this.isNewUser=e;this.providerId=t;this.profile=n}}class nC extends nb{constructor(e,t,n,i){super(e,t,n);this.username=i}}class nD extends nb{constructor(e,t){super(e,"facebook.com",t)}}class nL extends nC{constructor(e,t){super(e,"github.com",t,typeof(t===null||t===void 0?void 0:t.login)==="string"?t===null||t===void 0?void 0:t.login:null)}}class nM extends nb{constructor(e,t){super(e,"google.com",t)}}class nU extends nC{constructor(e,t,n){super(e,"twitter.com",t,n)}}function nF(e){const{user:t,_tokenResponse:n}=e;if(t.isAnonymous&&!n){return{providerId:null,isNewUser:false,profile:null}}return nO(n)}function nV(e,t){return getModularInstance(e).setPersistence(t)}function nx(e){return to(e)}async function nj(e,t){const n=eB(e);return n.validatePassword(t)}function nH(e,t,n,i){return(0,r.Ku)(e).onIdTokenChanged(t,n,i)}function nq(e,t,n){return(0,r.Ku)(e).beforeAuthStateChanged(t,n)}function nW(e,t,n,i){return(0,r.Ku)(e).onAuthStateChanged(t,n,i)}function nz(e){getModularInstance(e).useDeviceLanguage()}function nG(e,t){return getModularInstance(e).updateCurrentUser(t)}function nK(e){return(0,r.Ku)(e).signOut()}function n$(e,t){const n=eB(e);return n.revokeAccessToken(t)}async function nB(e){return getModularInstance(e).delete()}class nJ{constructor(e,t,n){this.type=e;this.credential=t;this.user=n}static _fromIdtoken(e,t){return new nJ("enroll",e,t)}static _fromMfaPendingCredential(e){return new nJ("signin",e)}toJSON(){const e=this.type==="enroll"?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(e===null||e===void 0?void 0:e.multiFactorSession){if((t=e.multiFactorSession)===null||t===void 0?void 0:t.pendingCredential){return nJ._fromMfaPendingCredential(e.multiFactorSession.pendingCredential)}else if((n=e.multiFactorSession)===null||n===void 0?void 0:n.idToken){return nJ._fromIdtoken(e.multiFactorSession.idToken)}}return null}}class nY{constructor(e,t,n){this.session=e;this.hints=t;this.signInResolver=n}static _fromError(e,t){const n=eB(e);const i=t.customData._serverResponse;const r=(i.mfaInfo||[]).map(e=>no._fromServerResponse(n,e));P(i.mfaPendingCredential,n,"internal-error");const s=nJ._fromMfaPendingCredential(i.mfaPendingCredential);return new nY(s,r,async e=>{const r=await e._process(n,s);delete i.mfaInfo;delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const a=await t0._fromIdTokenResponse(n,t.operationType,o);await n._updateCurrentUser(a.user);return a;case"reauthenticate":P(t.user,n,"internal-error");return t0._forOperation(t.user,t.operationType,o);default:w(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function nZ(e,t){var n;const i=getModularInstance(e);const r=t;P(t.customData.operationType,i,"argument-error");P((n=r.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error");return nY._fromError(i,r)}function nQ(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:start",q(e,t))}function nX(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:finalize",q(e,t))}function n0(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:start",q(e,t))}function n1(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:finalize",q(e,t))}function n3(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:withdraw",q(e,t))}class n2{constructor(e){this.user=e;this.enrolledFactors=[];e._onReload(t=>{if(t.mfaInfo){this.enrolledFactors=t.mfaInfo.map(t=>no._fromServerResponse(e.auth,t))}})}static _fromUser(e){return new n2(e)}async getSession(){return nJ._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e;const i=await this.getSession();const r=await el(this.user,n._process(this.user.auth,i,t));await this.user._updateTokensIfNecessary(r);return this.user.reload()}async unenroll(e){const t=typeof e==="string"?e:e.uid;const n=await this.user.getIdToken();try{const e=await el(this.user,n3(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t);await this.user._updateTokensIfNecessary(e);await this.user.reload()}catch(e){throw e}}}const n6=new WeakMap;function n4(e){const t=getModularInstance(e);if(!n6.has(t)){n6.set(t,n2._fromUser(t))}return n6.get(t)}const n5="__sak";class n9{constructor(e,t){this.storageRetriever=e;this.type=t}_isAvailable(){try{if(!this.storage){return Promise.resolve(false)}this.storage.setItem(n5,"1");this.storage.removeItem(n5);return Promise.resolve(true)}catch(e){return Promise.resolve(false)}}_set(e,t){this.storage.setItem(e,JSON.stringify(t));return Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){this.storage.removeItem(e);return Promise.resolve()}get storage(){return this.storageRetriever()}}const n8=1e3;const n7=10;class ie extends n9{constructor(){super(()=>window.localStorage,"LOCAL");this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t);this.listeners={};this.localCache={};this.pollTimer=null;this.fallbackToPolling=eH();this._shouldAllowMigration=true}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t);const i=this.localCache[t];if(n!==i){e(t,i,n)}}}onStorageEvent(e,t=false){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}const n=e.key;if(t){this.detachListener()}else{this.stopPolling()}const i=()=>{const e=this.storage.getItem(n);if(!t&&this.localCache[n]===e){return}this.notifyListeners(n,e)};const r=this.storage.getItem(n);if(ej()&&r!==e.newValue&&e.newValue!==e.oldValue){setTimeout(i,n7)}else{i()}}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n){for(const e of Array.from(n)){e(t?JSON.parse(t):t)}}}startPolling(){this.stopPolling();this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),true)})},n8)}stopPolling(){if(this.pollTimer){clearInterval(this.pollTimer);this.pollTimer=null}}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){if(Object.keys(this.listeners).length===0){if(this.fallbackToPolling){this.startPolling()}else{this.attachListener()}}if(!this.listeners[e]){this.listeners[e]=new Set;this.localCache[e]=this.storage.getItem(e)}this.listeners[e].add(t)}_removeListener(e,t){if(this.listeners[e]){this.listeners[e].delete(t);if(this.listeners[e].size===0){delete this.listeners[e]}}if(Object.keys(this.listeners).length===0){this.detachListener();this.stopPolling()}}async _set(e,t){await super._set(e,t);this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);this.localCache[e]=JSON.stringify(t);return t}async _remove(e){await super._remove(e);delete this.localCache[e]}}ie.type="LOCAL";const it=ie;const ii=1e3;function ir(e){var t,n;const i=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&");const r=RegExp(`${i}=([^;]+)`);return(n=(t=document.cookie.match(r))===null||t===void 0?void 0:t[1])!==null&&n!==void 0?n:null}function is(e){const t=window.location.protocol==="http:";return`${t?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class io{constructor(){this.type="COOKIE";this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===undefined){return e}const t=new URL(`${window.location.origin}/__cookies__`);t.searchParams.set("finalTarget",e);return t}async _isAvailable(){var e;if(typeof isSecureContext==="boolean"&&!isSecureContext){return false}if(typeof navigator==="undefined"||typeof document==="undefined"){return false}return(e=navigator.cookieEnabled)!==null&&e!==void 0?e:true}async _set(e,t){return}async _get(e){if(!this._isAvailable()){return null}const t=is(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e===null||e===void 0?void 0:e.value}return ir(t)}async _remove(e){if(!this._isAvailable()){return}const t=await this._get(e);if(!t){return}const n=is(e);document.cookie=`${n}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`;await fetch(`/__cookies__`,{method:"DELETE"}).catch(()=>undefined)}_addListener(e,t){if(!this._isAvailable()){return}const n=is(e);if(window.cookieStore){const e=e=>{const i=e.changed.find(e=>e.name===n);if(i){t(i.value)}const r=e.deleted.find(e=>e.name===n);if(r){t(null)}};const i=()=>window.cookieStore.removeEventListener("change",e);this.listenerUnsubscribes.set(t,i);return window.cookieStore.addEventListener("change",e)}let i=ir(n);const r=setInterval(()=>{const e=ir(n);if(e!==i){t(e);i=e}},ii);const s=()=>clearInterval(r);this.listenerUnsubscribes.set(t,s)}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);if(!n){return}n();this.listenerUnsubscribes.delete(t)}}io.type="COOKIE";const ia=null&&io;class ic extends n9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){return}_removeListener(e,t){return}}ic.type="SESSION";const iu=ic;function il(e){return Promise.all(e.map(async e=>{try{const t=await e;return{fulfilled:true,value:t}}catch(e){return{fulfilled:false,reason:e}}}))}class id{constructor(e){this.eventTarget=e;this.handlersMap={};this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t){return t}const n=new id(e);this.receivers.push(n);return n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e;const{eventId:n,eventType:i,data:r}=t.data;const s=this.handlersMap[i];if(!(s===null||s===void 0?void 0:s.size)){return}t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async e=>e(t.origin,r));const a=await il(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){if(Object.keys(this.handlersMap).length===0){this.eventTarget.addEventListener("message",this.boundEventHandler)}if(!this.handlersMap[e]){this.handlersMap[e]=new Set}this.handlersMap[e].add(t)}_unsubscribe(e,t){if(this.handlersMap[e]&&t){this.handlersMap[e].delete(t)}if(!t||this.handlersMap[e].size===0){delete this.handlersMap[e]}if(Object.keys(this.handlersMap).length===0){this.eventTarget.removeEventListener("message",this.boundEventHandler)}}}id.receivers=[];function ih(e="",t=10){let n="";for(let e=0;e<t;e++){n+=Math.floor(Math.random()*10)}return e+n}class ip{constructor(e){this.target=e;this.handlers=new Set}removeMessageHandler(e){if(e.messageChannel){e.messageChannel.port1.removeEventListener("message",e.onMessage);e.messageChannel.port1.close()}this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel!=="undefined"?new MessageChannel:null;if(!i){throw new Error("connection_unavailable")}let r;let s;return new Promise((o,a)=>{const c=ih("",20);i.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId!==c){return}switch(t.data.status){case"ack":clearTimeout(u);r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r);o(t.data.response);break;default:clearTimeout(u);clearTimeout(r);a(new Error("invalid_response"));break}}};this.handlers.add(s);i.port1.addEventListener("message",s.onMessage);this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{if(s){this.removeMessageHandler(s)}})}}function im(){return window}function ig(e){im().location.href=e}function iv(){return typeof im()["WorkerGlobalScope"]!=="undefined"&&typeof im()["importScripts"]==="function"}async function iI(){if(!(navigator===null||navigator===void 0?void 0:navigator.serviceWorker)){return null}try{const e=await navigator.serviceWorker.ready;return e.active}catch(e){return null}}function i_(){var e;return((e=navigator===null||navigator===void 0?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function iT(){return iv()?self:null}const iE="firebaseLocalStorageDb";const iw=1;const iy="firebaseLocalStorage";const iA="fbase_key";class iS{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)});this.request.addEventListener("error",()=>{t(this.request.error)})})}}function iR(e,t){return e.transaction([iy],t?"readwrite":"readonly").objectStore(iy)}function ik(){const e=indexedDB.deleteDatabase(iE);return new iS(e).toPromise()}function iP(){const e=indexedDB.open(iE,iw);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)});e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(iy,{keyPath:iA})}catch(e){n(e)}});e.addEventListener("success",async()=>{const n=e.result;if(!n.objectStoreNames.contains(iy)){n.close();await ik();t(await iP())}else{t(n)}})})}async function iN(e,t,n){const i=iR(e,true).put({[iA]:t,value:n});return new iS(i).toPromise()}async function iO(e,t){const n=iR(e,false).get(t);const i=await new iS(n).toPromise();return i===undefined?null:i.value}function ib(e,t){const n=iR(e,true).delete(t);return new iS(n).toPromise()}const iC=800;const iD=3;class iL{constructor(){this.type="LOCAL";this._shouldAllowMigration=true;this.listeners={};this.localCache={};this.pollTimer=null;this.pendingWrites=0;this.receiver=null;this.sender=null;this.serviceWorkerReceiverAvailable=false;this.activeServiceWorker=null;this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){if(this.db){return this.db}this.db=await iP();return this.db}async _withRetries(e){let t=0;while(true){try{const t=await this._openDb();return await e(t)}catch(e){if(t++>iD){throw e}if(this.db){this.db.close();this.db=undefined}}}}async initializeServiceWorkerMessaging(){return iv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(iT());this.receiver._subscribe("keyChanged",async(e,t)=>{const n=await this._poll();return{keyProcessed:n.includes(t.key)}});this.receiver._subscribe("ping",async(e,t)=>{return["keyChanged"]})}async initializeSender(){var e,t;this.activeServiceWorker=await iI();if(!this.activeServiceWorker){return}this.sender=new ip(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);if(!n){return}if(((e=n[0])===null||e===void 0?void 0:e.fulfilled)&&((t=n[0])===null||t===void 0?void 0:t.value.includes("keyChanged"))){this.serviceWorkerReceiverAvailable=true}}async notifyServiceWorker(e){if(!this.sender||!this.activeServiceWorker||i_()!==this.activeServiceWorker){return}try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB){return false}const e=await iP();await iN(e,n5,"1");await ib(e,n5);return true}catch(e){}return false}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>{await this._withRetries(n=>iN(n,e,t));this.localCache[e]=t;return this.notifyServiceWorker(e)})}async _get(e){const t=await this._withRetries(t=>iO(t,e));this.localCache[e]=t;return t}async _remove(e){return this._withPendingWrite(async()=>{await this._withRetries(t=>ib(t,e));delete this.localCache[e];return this.notifyServiceWorker(e)})}async _poll(){const e=await this._withRetries(e=>{const t=iR(e,false).getAll();return new iS(t).toPromise()});if(!e){return[]}if(this.pendingWrites!==0){return[]}const t=[];const n=new Set;if(e.length!==0){for(const{fbase_key:i,value:r}of e){n.add(i);if(JSON.stringify(this.localCache[i])!==JSON.stringify(r)){this.notifyListeners(i,r);t.push(i)}}}for(const e of Object.keys(this.localCache)){if(this.localCache[e]&&!n.has(e)){this.notifyListeners(e,null);t.push(e)}}return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n){for(const e of Array.from(n)){e(t)}}}startPolling(){this.stopPolling();this.pollTimer=setInterval(async()=>this._poll(),iC)}stopPolling(){if(this.pollTimer){clearInterval(this.pollTimer);this.pollTimer=null}}_addListener(e,t){if(Object.keys(this.listeners).length===0){this.startPolling()}if(!this.listeners[e]){this.listeners[e]=new Set;void this._get(e)}this.listeners[e].add(t)}_removeListener(e,t){if(this.listeners[e]){this.listeners[e].delete(t);if(this.listeners[e].size===0){delete this.listeners[e]}}if(Object.keys(this.listeners).length===0){this.stopPolling()}}}iL.type="LOCAL";const iM=iL;function iU(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:start",q(e,t))}function iF(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:finalize",q(e,t))}function iV(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:finalize",q(e,t))}const ix=e3("rcb");const ij=new U(3e4,6e4);class iH{constructor(){var e;this.hostLanguage="";this.counter=0;this.librarySeparatelyLoaded=!!((e=im().grecaptcha)===null||e===void 0?void 0:e.render)}load(e,t=""){P(iq(t),e,"argument-error");if(this.shouldResolveImmediately(t)&&Y(im().grecaptcha)){return Promise.resolve(im().grecaptcha)}return new Promise((n,i)=>{const r=im().setTimeout(()=>{i(y(e,"network-request-failed"))},ij.get());im()[ix]=()=>{im().clearTimeout(r);delete im()[ix];const s=im().grecaptcha;if(!s||!Y(s)){i(y(e,"internal-error"));return}const o=s.render;s.render=(e,t)=>{const n=o(e,t);this.counter++;return n};this.hostLanguage=t;n(s)};const s=`${eX()}?${querystring({onload:ix,render:"explicit",hl:t})}`;eQ(s).catch(()=>{clearTimeout(r);i(y(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=im().grecaptcha)===null||t===void 0?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function iq(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}class iW{async load(e){return new e5(e)}clearedOneInstance(){}}const iz="recaptcha";const iG={theme:"light",type:"image"};class iK{constructor(e,t,n=Object.assign({},iG)){this.parameters=n;this.type=iz;this.destroyed=false;this.widgetId=null;this.tokenChangeListeners=new Set;this.renderPromise=null;this.recaptcha=null;this.auth=eB(e);this.isInvisible=this.parameters.size==="invisible";P(typeof document!=="undefined",this.auth,"operation-not-supported-in-this-environment");const i=typeof t==="string"?document.getElementById(t):t;P(i,this.auth,"argument-error");this.container=i;this.parameters.callback=this.makeTokenCallback(this.parameters.callback);this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new iW:new iH;this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render();const t=this.getAssertedRecaptcha();const n=t.getResponse(e);if(n){return n}return new Promise(n=>{const i=e=>{if(!e){return}this.tokenChangeListeners.delete(i);n(e)};this.tokenChangeListeners.add(i);if(this.isInvisible){t.execute(e)}})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}if(this.renderPromise){return this.renderPromise}this.renderPromise=this.makeRenderPromise().catch(e=>{this.renderPromise=null;throw e});return this.renderPromise}_reset(){this.assertNotDestroyed();if(this.widgetId!==null){this.getAssertedRecaptcha().reset(this.widgetId)}}clear(){this.assertNotDestroyed();this.destroyed=true;this._recaptchaLoader.clearedOneInstance();if(!this.isInvisible){this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}}validateStartingState(){P(!this.parameters.sitekey,this.auth,"argument-error");P(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error");P(typeof document!=="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{this.tokenChangeListeners.forEach(e=>e(t));if(typeof e==="function"){e(t)}else if(typeof e==="string"){const n=im()[e];if(typeof n==="function"){n(t)}}}}assertNotDestroyed(){P(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){await this.init();if(!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t);e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){P(C()&&!iv(),this.auth,"internal-error");await i$();this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||undefined);const e=await X(this.auth);P(e,this.auth,"internal-error");this.parameters.sitekey=e}getAssertedRecaptcha(){P(this.recaptcha,this.auth,"internal-error");return this.recaptcha}}function i$(){let e=null;return new Promise(t=>{if(document.readyState==="complete"){t();return}e=()=>t();window.addEventListener("load",e)}).catch(t=>{if(e){window.removeEventListener("load",e)}throw t})}class iB{constructor(e,t){this.verificationId=e;this.onConfirmation=t}confirm(e){const t=tU._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function iJ(e,t,n){if(_isFirebaseServerApp(e.app)){return Promise.reject(S(e))}const i=eB(e);const r=await iQ(i,t,getModularInstance(n));return new iB(r,e=>nt(i,e))}async function iY(e,t,n){const i=getModularInstance(e);await t8(false,i,"phone");const r=await iQ(i.auth,t,getModularInstance(n));return new iB(r,e=>nn(i,e))}async function iZ(e,t,n){const i=getModularInstance(e);if(_isFirebaseServerApp(i.auth.app)){return Promise.reject(S(i.auth))}const r=await iQ(i.auth,t,getModularInstance(n));return new iB(r,e=>ni(i,e))}async function iQ(e,t,n){var i;if(!e._getRecaptchaConfig()){try{await to(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}}try{let r;if(typeof t==="string"){r={phoneNumber:t}}else{r=t}if("session"in r){const t=r.session;if("phoneNumber"in r){P(t.type==="enroll",e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};const s=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===tn){P((n===null||n===void 0?void 0:n.type)===iz,e,"argument-error");const i=await i0(e,t,n);return nQ(e,i)}return nQ(e,t)};const o=ts(e,i,"mfaSmsEnrollment",s,"PHONE_PROVIDER");const a=await o.catch(e=>{return Promise.reject(e)});return a.phoneSessionInfo.sessionInfo}else{P(t.type==="signin",e,"internal-error");const s=((i=r.multiFactorHint)===null||i===void 0?void 0:i.uid)||r.multiFactorUid;P(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};const a=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===tn){P((n===null||n===void 0?void 0:n.type)===iz,e,"argument-error");const i=await i0(e,t,n);return iU(e,i)}return iU(e,t)};const c=ts(e,o,"mfaSmsSignIn",a,"PHONE_PROVIDER");const u=await c.catch(e=>{return Promise.reject(e)});return u.phoneResponseInfo.sessionInfo}}else{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};const i=async(e,t)=>{if(t.captchaResponse===tn){P((n===null||n===void 0?void 0:n.type)===iz,e,"argument-error");const i=await i0(e,t,n);return tb(e,i)}return tb(e,t)};const s=ts(e,t,"sendVerificationCode",i,"PHONE_PROVIDER");const o=await s.catch(e=>{return Promise.reject(e)});return o.sessionInfo}}finally{n===null||n===void 0?void 0:n._reset()}}async function iX(e,t){const n=getModularInstance(e);if(_isFirebaseServerApp(n.auth.app)){return Promise.reject(S(n.auth))}await t9(n,t)}async function i0(e,t,n){P(n.type===iz,e,"argument-error");const i=await n.verify();P(typeof i==="string",e,"argument-error");const r=Object.assign({},t);if("phoneEnrollmentInfo"in r){const e=r.phoneEnrollmentInfo.phoneNumber;const t=r.phoneEnrollmentInfo.captchaResponse;const n=r.phoneEnrollmentInfo.clientType;const s=r.phoneEnrollmentInfo.recaptchaVersion;Object.assign(r,{"phoneEnrollmentInfo":{phoneNumber:e,recaptchaToken:i,captchaResponse:t,clientType:n,recaptchaVersion:s}});return r}else if("phoneSignInInfo"in r){const e=r.phoneSignInInfo.captchaResponse;const t=r.phoneSignInInfo.clientType;const n=r.phoneSignInInfo.recaptchaVersion;Object.assign(r,{"phoneSignInInfo":{recaptchaToken:i,captchaResponse:e,clientType:t,recaptchaVersion:n}});return r}else{Object.assign(r,{"recaptchaToken":i});return r}}class i1{constructor(e){this.providerId=i1.PROVIDER_ID;this.auth=eB(e)}verifyPhoneNumber(e,t){return iQ(this.auth,e,(0,r.Ku)(t))}static credential(e,t){return tU._fromVerification(e,t)}static credentialFromResult(e){const t=e;return i1.credentialFromTaggedObject(t)}static credentialFromError(e){return i1.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e){return null}const{phoneNumber:t,temporaryProof:n}=e;if(t&&n){return tU._fromTokenResponse(t,n)}return null}}i1.PROVIDER_ID="phone";i1.PHONE_SIGN_IN_METHOD="phone";function i3(e,t){if(t){return eA(t)}P(e._popupRedirectResolver,e,"argument-error");return e._popupRedirectResolver}class i2 extends tf{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return tP(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tP(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tP(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:true,returnIdpCredential:true};if(e){t.idToken=e}return t}}function i6(e){return ne(e.auth,new i2(e),e.bypassAuthState)}function i4(e){const{auth:t,user:n}=e;P(n,t,"internal-error");return t7(n,new i2(e),e.bypassAuthState)}async function i5(e){const{auth:t,user:n}=e;P(n,t,"internal-error");return t9(n,new i2(e),e.bypassAuthState)}class i9{constructor(e,t,n,i,r=false){this.auth=e;this.resolver=n;this.user=i;this.bypassAuthState=r;this.pendingPromise=null;this.eventManager=null;this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth);await this.onExecution();this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s){this.reject(s);return}const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||undefined,postBody:i||undefined,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i6;case"linkViaPopup":case"linkViaRedirect":return i5;case"reauthViaPopup":case"reauthViaRedirect":return i4;default:w(this.auth,"internal-error")}}resolve(e){O(this.pendingPromise,"Pending promise was never set");this.pendingPromise.resolve(e);this.unregisterAndCleanUp()}reject(e){O(this.pendingPromise,"Pending promise was never set");this.pendingPromise.reject(e);this.unregisterAndCleanUp()}unregisterAndCleanUp(){if(this.eventManager){this.eventManager.unregisterConsumer(this)}this.pendingPromise=null;this.cleanUp()}}const i8=new U(2e3,1e4);async function i7(e,t,n){if((0,i.xZ)(e.app)){return Promise.reject(y(e,"operation-not-supported-in-this-environment"))}const r=eB(e);R(e,t,tq);const s=i3(r,n);const o=new rn(r,"signInViaPopup",t,s);return o.executeNotNull()}async function re(e,t,n){const i=getModularInstance(e);if(_isFirebaseServerApp(i.auth.app)){return Promise.reject(y(i.auth,"operation-not-supported-in-this-environment"))}R(i.auth,t,tq);const r=i3(i.auth,n);const s=new rn(i.auth,"reauthViaPopup",t,r,i);return s.executeNotNull()}async function rt(e,t,n){const i=getModularInstance(e);R(i.auth,t,tq);const r=i3(i.auth,n);const s=new rn(i.auth,"linkViaPopup",t,r,i);return s.executeNotNull()}class rn extends i9{constructor(e,t,n,i,r){super(e,t,i,r);this.provider=n;this.authWindow=null;this.pollId=null;if(rn.currentPopupAction){rn.currentPopupAction.cancel()}rn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();P(e,this.auth,"internal-error");return e}async onExecution(){O(this.filter.length===1,"Popup operations only handle one event");const e=ih();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e);this.authWindow.associatedEvent=e;this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)});this.resolver._isIframeWebStorageSupported(this.auth,e=>{if(!e){this.reject(y(this.auth,"web-storage-unsupported"))}});this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){if(this.authWindow){this.authWindow.close()}if(this.pollId){window.clearTimeout(this.pollId)}this.authWindow=null;this.pollId=null;rn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0?void 0:n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null;this.reject(y(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i8.get())};e()}}rn.currentPopupAction=null;const ri="pendingRedirect";const rr=new Map;class rs extends i9{constructor(e,t,n=false){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,undefined,n);this.eventId=null}async execute(){let e=rr.get(this.auth._key());if(!e){try{const t=await ro(this.resolver,this.auth);const n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}rr.set(this.auth._key(),e)}if(!this.bypassAuthState){rr.set(this.auth._key(),()=>Promise.resolve(null))}return e()}async onAuthEvent(e){if(e.type==="signInViaRedirect"){return super.onAuthEvent(e)}else if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t){this.user=t;return super.onAuthEvent(e)}else{this.resolve(null)}}}async onExecution(){}cleanUp(){}}async function ro(e,t){const n=rd(t);const i=rl(e);if(!await i._isAvailable()){return false}const r=await i._get(n)==="true";await i._remove(n);return r}async function ra(e,t){return rl(e)._set(rd(t),"true")}function rc(){rr.clear()}function ru(e,t){rr.set(e._key(),t)}function rl(e){return eA(e._redirectPersistence)}function rd(e){return ek(ri,e.config.apiKey,e.name)}function rh(e,t,n){return rp(e,t,n)}async function rp(e,t,n){if(_isFirebaseServerApp(e.app)){return Promise.reject(S(e))}const i=eB(e);R(e,t,tq);await i._initializationPromise;const r=i3(i,n);await ra(r,i);return r._openRedirect(i,t,"signInViaRedirect")}function rf(e,t,n){return rm(e,t,n)}async function rm(e,t,n){const i=getModularInstance(e);R(i.auth,t,tq);if(_isFirebaseServerApp(i.auth.app)){return Promise.reject(S(i.auth))}await i.auth._initializationPromise;const r=i3(i.auth,n);await ra(r,i.auth);const s=await rT(i);return r._openRedirect(i.auth,t,"reauthViaRedirect",s)}function rg(e,t,n){return rv(e,t,n)}async function rv(e,t,n){const i=getModularInstance(e);R(i.auth,t,tq);await i.auth._initializationPromise;const r=i3(i.auth,n);await t8(false,i,t.providerId);await ra(r,i.auth);const s=await rT(i);return r._openRedirect(i.auth,t,"linkViaRedirect",s)}async function rI(e,t){await eB(e)._initializationPromise;return r_(e,t,false)}async function r_(e,t,n=false){if((0,i.xZ)(e.app)){return Promise.reject(S(e))}const r=eB(e);const s=i3(r,t);const o=new rs(r,s,n);const a=await o.execute();if(a&&!n){delete a.user._redirectEventId;await r._persistUserIfCurrent(a.user);await r._setRedirectUser(null,t)}return a}async function rT(e){const t=ih(`${e.uid}:::`);e._redirectEventId=t;await e.auth._setRedirectUser(e);await e.auth._persistUserIfCurrent(e);return t}const rE=10*60*1e3;class rw{constructor(e){this.auth=e;this.cachedEventUids=new Set;this.consumers=new Set;this.queuedRedirectEvent=null;this.hasHandledPotentialRedirect=false;this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e);if(this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)){this.sendToConsumer(this.queuedRedirectEvent,e);this.saveEventToCache(this.queuedRedirectEvent);this.queuedRedirectEvent=null}}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e)){return false}let t=false;this.consumers.forEach(n=>{if(this.isEventForConsumer(e,n)){t=true;this.sendToConsumer(e,n);this.saveEventToCache(e)}});if(this.hasHandledPotentialRedirect||!rS(e)){return t}this.hasHandledPotentialRedirect=true;if(!t){this.queuedRedirectEvent=e;t=true}return t}sendToConsumer(e,t){var n;if(e.error&&!rA(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,i))}else{t.onAuthEvent(e)}}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){if(Date.now()-this.lastProcessedEventTime>=rE){this.cachedEventUids.clear()}return this.cachedEventUids.has(ry(e))}saveEventToCache(e){this.cachedEventUids.add(ry(e));this.lastProcessedEventTime=Date.now()}}function ry(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function rA({type:e,error:t}){return e==="unknown"&&(t===null||t===void 0?void 0:t.code)===`auth/${"no-auth-event"}`}function rS(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return true;case"unknown":return rA(e);default:return false}}async function rR(e,t={}){return W(e,"GET","/v1/projects",t)}const rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;const rP=/^https?/;async function rN(e){if(e.config.emulator){return}const{authorizedDomains:t}=await rR(e);for(const e of t){try{if(rO(e)){return}}catch(e){}}w(e,"unauthorized-domain")}function rO(e){const t=b();const{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);if(r.hostname===""&&i===""){return n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://","")}return n==="chrome-extension:"&&r.hostname===i}if(!rP.test(n)){return false}if(rk.test(e)){return i===e}const r=e.replace(/\./g,"\\.");const s=new RegExp("^(.+\\."+r+"|"+r+")$","i");return s.test(i)}const rb=new U(3e4,6e4);function rC(){const e=im().___jsl;if(e===null||e===void 0?void 0:e.H){for(const t of Object.keys(e.H)){e.H[t].r=e.H[t].r||[];e.H[t].L=e.H[t].L||[];e.H[t].r=[...e.H[t].L];if(e.CP){for(let t=0;t<e.CP.length;t++){e.CP[t]=null}}}}}function rD(e){return new Promise((t,n)=>{var i,r,s;function o(){rC();gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rC();n(y(e,"network-request-failed"))},timeout:rb.get()})}if((r=(i=im().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0?void 0:r.Iframe){t(gapi.iframes.getContext())}else if(!!((s=im().gapi)===null||s===void 0?void 0:s.load)){o()}else{const t=e3("iframefcb");im()[t]=()=>{if(!!gapi.load){o()}else{n(y(e,"network-request-failed"))}};return eQ(`${e1()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{rL=null;throw e})}let rL=null;function rM(e){rL=rL||rD(e);return rL}const rU=new U(5e3,15e3);const rF="__/auth/iframe";const rV="emulator/auth/iframe";const rx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"};const rj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rH(e){const t=e.config;P(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?F(t,rV):`https://${e.config.authDomain}/${rF}`;const s={apiKey:t.apiKey,appName:e.name,v:i.MF};const o=rj.get(e.config.apiHost);if(o){s.eid=o}const a=e._getFrameworks();if(a.length){s.fw=a.join(",")}return`${n}?${(0,r.Am)(s).slice(1)}`}async function rq(e){const t=await rM(e);const n=im().gapi;P(n,e,"internal-error");return t.open({where:document.body,url:rH(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rx,dontclear:true},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:false});const r=y(e,"network-request-failed");const s=im().setTimeout(()=>{i(r)},rU.get());function o(){im().clearTimeout(s);n(t)}t.ping(o).then(o,()=>{i(r)})}))}const rW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};const rz=500;const rG=600;const rK="_blank";const r$="http://localhost";class rB{constructor(e){this.window=e;this.associatedEvent=null}close(){if(this.window){try{this.window.close()}catch(e){}}}}function rJ(e,t,n,i=rz,s=rG){const o=Math.max((window.screen.availHeight-s)/2,0).toString();const a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},rW),{width:i.toString(),height:s.toString(),top:o,left:a});const l=(0,r.ZQ)().toLowerCase();if(n){c=eC(l)?rK:n}if(eO(l)){t=t||r$;u.scrollbars="yes"}const d=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(ex(l)&&c!=="_self"){rY(t||"",c);return new rB(null)}const h=window.open(t||"",c,d);P(h,e,"popup-blocked");try{h.focus()}catch(e){}return new rB(h)}function rY(e,t){const n=document.createElement("a");n.href=e;n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",true,true,window,1,0,0,0,0,false,false,false,false,1,null);n.dispatchEvent(i)}const rZ="__/auth/handler";const rQ="emulator/auth/handler";const rX=encodeURIComponent("fac");async function r0(e,t,n,s,o,a){P(e.config.authDomain,e,"auth-domain-config-required");P(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.MF,eventId:o};if(t instanceof tq){t.setDefaultLanguage(e.languageCode);c.providerId=t.providerId||"";if(!(0,r.Im)(t.getCustomParameters())){c.customParameters=JSON.stringify(t.getCustomParameters())}for(const[e,t]of Object.entries(a||{})){c[e]=t}}if(t instanceof tW){const e=t.getScopes().filter(e=>e!=="");if(e.length>0){c.scopes=e.join(",")}}if(e.tenantId){c.tid=e.tenantId}const u=c;for(const e of Object.keys(u)){if(u[e]===undefined){delete u[e]}}const l=await e._getAppCheckToken();const d=l?`#${rX}=${encodeURIComponent(l)}`:"";return`${r1(e)}?${(0,r.Am)(u).slice(1)}${d}`}function r1({config:e}){if(!e.emulator){return`https://${e.authDomain}/${rZ}`}return F(e,rQ)}const r3="webStorageSupport";class r2{constructor(){this.eventManagers={};this.iframes={};this.originValidationPromises={};this._redirectPersistence=iu;this._completeRedirectFn=r_;this._overrideRedirectResult=ru}async _openPopup(e,t,n,i){var r;O((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const s=await r0(e,t,n,b(),i);return rJ(e,s,ih())}async _openRedirect(e,t,n,i){await this._originValidation(e);const r=await r0(e,t,n,b(),i);ig(r);return new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];if(e){return Promise.resolve(e)}else{O(n,"If manager is not set, promise should be");return n}}const n=this.initAndGetManager(e);this.eventManagers[t]={promise:n};n.catch(()=>{delete this.eventManagers[t]});return n}async initAndGetManager(e){const t=await rq(e);const n=new rw(e);t.register("authEvent",t=>{P(t===null||t===void 0?void 0:t.authEvent,e,"invalid-auth-event");const i=n.onEvent(t.authEvent);return{status:i?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER);this.eventManagers[e._key()]={manager:n};this.iframes[e._key()]=t;return n}_isIframeWebStorageSupported(e,t){const n=this.iframes[e._key()];n.send(r3,{type:r3},n=>{var i;const r=(i=n===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i[r3];if(r!==undefined){t(!!r)}w(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();if(!this.originValidationPromises[t]){this.originValidationPromises[t]=rN(e)}return this.originValidationPromises[t]}get _shouldInitProactively(){return eH()||eb()||eF()}}const r6=r2;class r4{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return N("unexpected MultiFactorSessionType")}}}class r5 extends r4{constructor(e){super("phone");this.credential=e}static _fromCredential(e){return new r5(e)}_finalizeEnroll(e,t,n){return nX(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return iF(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class r9{constructor(){}static assertion(e){return r5._fromCredential(e)}}r9.FACTOR_ID="phone";class r8{static assertionForEnrollment(e,t){return r7._fromSecret(e,t)}static assertionForSignIn(e,t){return r7._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const n=e;P(typeof((t=n.user)===null||t===void 0?void 0:t.auth)!=="undefined","internal-error");const i=await n0(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return se._fromStartTotpMfaEnrollmentResponse(i,n.user.auth)}}r8.FACTOR_ID="totp";class r7 extends r4{constructor(e,t,n){super("totp");this.otp=e;this.enrollmentId=t;this.secret=n}static _fromSecret(e,t){return new r7(t,undefined,e)}static _fromEnrollmentId(e,t){return new r7(t,e)}async _finalizeEnroll(e,t,n){P(typeof this.secret!=="undefined",e,"argument-error");return n1(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){P(this.enrollmentId!==undefined&&this.otp!==undefined,e,"argument-error");const n={verificationCode:this.otp};return iV(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class se{constructor(e,t,n,i,r,s,o){this.sessionInfo=s;this.auth=o;this.secretKey=e;this.hashingAlgorithm=t;this.codeLength=n;this.codeIntervalSeconds=i;this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(e,t){return new se(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let i=false;if(st(e)||st(t)){i=true}if(i){if(st(e)){e=((n=this.auth.currentUser)===null||n===void 0?void 0:n.email)||"unknownuser"}if(st(t)){t=this.auth.name}}return`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function st(e){return typeof e==="undefined"||(e===null||e===void 0?void 0:e.length)===0}var sn="@firebase/auth";var si="1.10.7";class sr{constructor(e){this.auth=e;this.internalListeners=new Map}getUid(){var e;this.assertAuthConfigured();return((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){this.assertAuthConfigured();await this.auth._initializationPromise;if(!this.auth.currentUser){return null}const t=await this.auth.currentUser.getIdToken(e);return{accessToken:t}}addAuthTokenListener(e){this.assertAuthConfigured();if(this.internalListeners.has(e)){return}const t=this.auth.onIdTokenChanged(t=>{e((t===null||t===void 0?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t);this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);if(!t){return}this.internalListeners.delete(e);t();this.updateProactiveRefresh()}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){if(this.internalListeners.size>0){this.auth._startProactiveRefresh()}else{this.auth._stopProactiveRefresh()}}}function ss(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return undefined}}function so(e){(0,i.om)(new a.uA("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate();const r=t.getProvider("heartbeat");const s=t.getProvider("app-check-internal");const{apiKey:o,authDomain:a}=i.options;P(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eq(e)};const u=new e$(i,r,s,c);tc(u,n);return u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{const i=e.getProvider("auth-internal");i.initialize()}));(0,i.om)(new a.uA("auth-internal",e=>{const t=eB(e.getProvider("auth").getImmediate());return(e=>new sr(e))(t)},"PRIVATE").setInstantiationMode("EXPLICIT"));(0,i.KO)(sn,si,ss(e));(0,i.KO)(sn,si,"esm2017")}const sa=5*60;const sc=(0,r.XA)("authIdTokenMaxAge")||sa;let su=null;const sl=e=>async t=>{const n=t&&await t.getIdTokenResult();const i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>sc){return}const r=n===null||n===void 0?void 0:n.token;if(su===r){return}su=r;await fetch(e,{method:r?"POST":"DELETE",headers:r?{"Authorization":`Bearer ${r}`}:{}})};function sd(e=(0,i.Sx)()){const t=(0,i.j6)(e,"auth");if(t.isInitialized()){return t.getImmediate()}const n=ta(e,{popupRedirectResolver:r6,persistence:[iM,it,iu]});const s=(0,r.XA)("authTokenSyncURL");if(s&&typeof isSecureContext==="boolean"&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=sl(e.toString());nq(n,t,()=>t(n.currentUser));nH(n,e=>t(e))}}const o=(0,r.Tj)("auth");if(o){tu(n,`http://${o}`)}return n}function sh(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}eZ({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e);i.onload=t;i.onerror=e=>{const t=y("internal-error");t.customData=e;n(t)};i.type="text/javascript";i.charset="UTF-8";sh().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});so("Browser")}}]);