exports.id=204;exports.ids=[204];exports.modules={11055:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(21519);const o=65536;async function*i(e,t=true){for(const r of e){if("stream"in r){yield*r.stream()}else if(ArrayBuffer.isView(r)){if(t){let e=r.byteOffset;const t=r.byteOffset+r.byteLength;while(e!==t){const n=Math.min(t-e,o);const i=r.buffer.slice(e,e+n);e+=i.byteLength;yield new Uint8Array(i)}}else{yield r}}else{let e=0,t=r;while(e!==t.size){const r=t.slice(e,Math.min(t.size,e+o));const n=await r.arrayBuffer();e+=n.byteLength;yield new Uint8Array(n)}}}}const s=class e{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],r={}){if(typeof t!=="object"||t===null){throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.")}if(typeof t[Symbol.iterator]!=="function"){throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.")}if(typeof r!=="object"&&typeof r!=="function"){throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.")}if(r===null)r={};const n=new TextEncoder;for(const r of t){let t;if(ArrayBuffer.isView(r)){t=new Uint8Array(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength))}else if(r instanceof ArrayBuffer){t=new Uint8Array(r.slice(0))}else if(r instanceof e){t=r}else{t=n.encode(`${r}`)}this.#r+=ArrayBuffer.isView(t)?t.byteLength:t.size;this.#e.push(t)}this.#n=`${r.endings===undefined?"transparent":r.endings}`;const o=r.type===undefined?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(o)?o:""}get size(){return this.#r}get type(){return this.#t}async text(){const e=new TextDecoder;let t="";for await(const r of i(this.#e,false)){t+=e.decode(r,{stream:true})}t+=e.decode();return t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const r of i(this.#e,false)){e.set(r,t);t+=r.length}return e.buffer}stream(){const e=i(this.#e,true);return new globalThis.ReadableStream({type:"bytes",async pull(t){const r=await e.next();r.done?t.close():t.enqueue(r.value)},async cancel(){await e.return()}})}slice(t=0,r=this.size,n=""){const{size:o}=this;let i=t<0?Math.max(o+t,0):Math.min(t,o);let s=r<0?Math.max(o+r,0):Math.min(r,o);const a=Math.max(s-i,0);const u=this.#e;const l=[];let f=0;for(const e of u){if(f>=a){break}const t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(i&&t<=i){i-=t;s-=t}else{let r;if(ArrayBuffer.isView(e)){r=e.subarray(i,Math.min(t,s));f+=r.byteLength}else{r=e.slice(i,Math.min(t,s));f+=r.size}s-=t;l.push(r);i=0}}const c=new e([],{type:String(n).toLowerCase()});c.#r=a;c.#e=l;return c}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e==="object"&&typeof e.constructor==="function"&&(typeof e.stream==="function"||typeof e.arrayBuffer==="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(s.prototype,{size:{enumerable:true},type:{enumerable:true},slice:{enumerable:true}});const a=s;const u=a},21519:(e,t,r)=>{const n=65536;if(!globalThis.ReadableStream){try{const e=r(1708);const{emitWarning:t}=e;try{e.emitWarning=()=>{};Object.assign(globalThis,r(37830));e.emitWarning=t}catch(r){e.emitWarning=t;throw r}}catch(e){Object.assign(globalThis,r(33998))}}try{const{Blob:e}=r(79428);if(e&&!e.prototype.stream){e.prototype.stream=function e(e){let t=0;const r=this;return new ReadableStream({type:"bytes",async pull(e){const o=r.slice(t,Math.min(r.size,t+n));const i=await o.arrayBuffer();t+=i.byteLength;e.enqueue(new Uint8Array(i));if(t===r.size){e.close()}}})}}}catch(e){}},33998:function(e,t){(function(e,r){true?r(t):0})(this,function(e){"use strict";function t(){return undefined}function r(e){return typeof e==="object"&&e!==null||typeof e==="function"}const n=t;function o(e,t){try{Object.defineProperty(e,"name",{value:t,configurable:true})}catch(e){}}const i=Promise;const s=Promise.prototype.then;const a=Promise.reject.bind(i);function u(e){return new i(e)}function l(e){return u(t=>t(e))}function f(e){return a(e)}function c(e,t,r){return s.call(e,t,r)}function d(e,t,r){c(c(e,t,r),undefined,n)}function h(e,t){d(e,t)}function p(e,t){d(e,undefined,t)}function b(e,t,r){return c(e,t,r)}function y(e){c(e,undefined,n)}let m=e=>{if(typeof queueMicrotask==="function"){m=queueMicrotask}else{const e=l(undefined);m=t=>c(e,t)}return m(e)};function _(e,t,r){if(typeof e!=="function"){throw new TypeError("Argument is not a function")}return Function.prototype.apply.call(e,t,r)}function g(e,t,r){try{return l(_(e,t,r))}catch(e){return f(e)}}const w=16384;class S{constructor(){this._cursor=0;this._size=0;this._front={_elements:[],_next:undefined};this._back=this._front;this._cursor=0;this._size=0}get length(){return this._size}push(e){const t=this._back;let r=t;if(t._elements.length===w-1){r={_elements:[],_next:undefined}}t._elements.push(e);if(r!==t){this._back=r;t._next=r}++this._size}shift(){const e=this._front;let t=e;const r=this._cursor;let n=r+1;const o=e._elements;const i=o[r];if(n===w){t=e._next;n=0}--this._size;this._cursor=n;if(e!==t){this._front=t}o[r]=undefined;return i}forEach(e){let t=this._cursor;let r=this._front;let n=r._elements;while(t!==n.length||r._next!==undefined){if(t===n.length){r=r._next;n=r._elements;t=0;if(n.length===0){break}}e(n[t]);++t}}peek(){const e=this._front;const t=this._cursor;return e._elements[t]}}const T=Symbol("[[AbortSteps]]");const v=Symbol("[[ErrorSteps]]");const R=Symbol("[[CancelSteps]]");const P=Symbol("[[PullSteps]]");const E=Symbol("[[ReleaseSteps]]");function C(e,t){e._ownerReadableStream=t;t._reader=e;if(t._state==="readable"){j(e)}else if(t._state==="closed"){O(e)}else{B(e,t._storedError)}}function q(e,t){const r=e._ownerReadableStream;return nw(r,t)}function A(e){const t=e._ownerReadableStream;if(t._state==="readable"){z(e,new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`))}else{W(e,new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`))}t._readableStreamController[E]();t._reader=undefined;e._ownerReadableStream=undefined}function k(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function j(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t;e._closedPromise_reject=r})}function B(e,t){j(e);z(e,t)}function O(e){j(e);$(e)}function z(e,t){if(e._closedPromise_reject===undefined){return}y(e._closedPromise);e._closedPromise_reject(t);e._closedPromise_resolve=undefined;e._closedPromise_reject=undefined}function W(e,t){B(e,t)}function $(e){if(e._closedPromise_resolve===undefined){return}e._closedPromise_resolve(undefined);e._closedPromise_resolve=undefined;e._closedPromise_reject=undefined}const L=Number.isFinite||function(e){return typeof e==="number"&&isFinite(e)};const M=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function I(e){return typeof e==="object"||typeof e==="function"}function x(e,t){if(e!==undefined&&!I(e)){throw new TypeError(`${t} is not an object.`)}}function U(e,t){if(typeof e!=="function"){throw new TypeError(`${t} is not a function.`)}}function D(e){return typeof e==="object"&&e!==null||typeof e==="function"}function N(e,t){if(!D(e)){throw new TypeError(`${t} is not an object.`)}}function H(e,t,r){if(e===undefined){throw new TypeError(`Parameter ${t} is required in '${r}'.`)}}function V(e,t,r){if(e===undefined){throw new TypeError(`${t} is required in '${r}'.`)}}function Y(e){return Number(e)}function Q(e){return e===0?0:e}function G(e){return Q(M(e))}function Z(e,t){const r=0;const n=Number.MAX_SAFE_INTEGER;let o=Number(e);o=Q(o);if(!L(o)){throw new TypeError(`${t} is not a finite number`)}o=G(o);if(o<r||o>n){throw new TypeError(`${t} is outside the accepted range of ${r} to ${n}, inclusive`)}if(!L(o)||o===0){return 0}return o}function J(e,t){if(!n_(e)){throw new TypeError(`${t} is not a ReadableStream.`)}}function K(e){return new en(e)}function X(e,t){e._reader._readRequests.push(t)}function ee(e,t,r){const n=e._reader;const o=n._readRequests.shift();if(r){o._closeSteps()}else{o._chunkSteps(t)}}function et(e){return e._reader._readRequests.length}function er(e){const t=e._reader;if(t===undefined){return false}if(!eo(t)){return false}return true}class en{constructor(e){H(e,1,"ReadableStreamDefaultReader");J(e,"First parameter");if(ng(e)){throw new TypeError("This stream has already been locked for exclusive reading by another reader")}C(this,e);this._readRequests=new S}get closed(){if(!eo(this)){return f(eu("closed"))}return this._closedPromise}cancel(e=undefined){if(!eo(this)){return f(eu("cancel"))}if(this._ownerReadableStream===undefined){return f(k("cancel"))}return q(this,e)}read(){if(!eo(this)){return f(eu("read"))}if(this._ownerReadableStream===undefined){return f(k("read from"))}let e;let t;const r=u((r,n)=>{e=r;t=n});const n={_chunkSteps:t=>e({value:t,done:false}),_closeSteps:()=>e({value:undefined,done:true}),_errorSteps:e=>t(e)};ei(this,n);return r}releaseLock(){if(!eo(this)){throw eu("releaseLock")}if(this._ownerReadableStream===undefined){return}es(this)}}Object.defineProperties(en.prototype,{cancel:{enumerable:true},read:{enumerable:true},releaseLock:{enumerable:true},closed:{enumerable:true}});o(en.prototype.cancel,"cancel");o(en.prototype.read,"read");o(en.prototype.releaseLock,"releaseLock");if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(en.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:true})}function eo(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_readRequests")){return false}return e instanceof en}function ei(e,t){const r=e._ownerReadableStream;r._disturbed=true;if(r._state==="closed"){t._closeSteps()}else if(r._state==="errored"){t._errorSteps(r._storedError)}else{r._readableStreamController[P](t)}}function es(e){A(e);const t=new TypeError("Reader was released");ea(e,t)}function ea(e,t){const r=e._readRequests;e._readRequests=new S;r.forEach(e=>{e._errorSteps(t)})}function eu(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}const el=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ef{constructor(e,t){this._ongoingPromise=undefined;this._isFinished=false;this._reader=e;this._preventCancel=t}next(){const e=()=>this._nextSteps();this._ongoingPromise=this._ongoingPromise?b(this._ongoingPromise,e,e):e();return this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?b(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished){return Promise.resolve({value:undefined,done:true})}const e=this._reader;let t;let r;const n=u((e,n)=>{t=e;r=n});const o={_chunkSteps:e=>{this._ongoingPromise=undefined;m(()=>t({value:e,done:false}))},_closeSteps:()=>{this._ongoingPromise=undefined;this._isFinished=true;A(e);t({value:undefined,done:true})},_errorSteps:t=>{this._ongoingPromise=undefined;this._isFinished=true;A(e);r(t)}};ei(e,o);return n}_returnSteps(e){if(this._isFinished){return Promise.resolve({value:e,done:true})}this._isFinished=true;const t=this._reader;if(!this._preventCancel){const r=q(t,e);A(t);return b(r,()=>({value:e,done:true}))}A(t);return l({value:e,done:true})}}const ec={next(){if(!eh(this)){return f(ep("next"))}return this._asyncIteratorImpl.next()},return(e){if(!eh(this)){return f(ep("return"))}return this._asyncIteratorImpl.return(e)}};Object.setPrototypeOf(ec,el);function ed(e,t){const r=K(e);const n=new ef(r,t);const o=Object.create(ec);o._asyncIteratorImpl=n;return o}function eh(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl")){return false}try{return e._asyncIteratorImpl instanceof ef}catch(e){return false}}function ep(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}const eb=Number.isNaN||function(e){return e!==e};var ey,em,e_;function eg(e){return e.slice()}function ew(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}let eS=e=>{if(typeof e.transfer==="function"){eS=e=>e.transfer()}else if(typeof structuredClone==="function"){eS=e=>structuredClone(e,{transfer:[e]})}else{eS=e=>e}return eS(e)};let eT=e=>{if(typeof e.detached==="boolean"){eT=e=>e.detached}else{eT=e=>e.byteLength===0}return eT(e)};function ev(e,t,r){if(e.slice){return e.slice(t,r)}const n=r-t;const o=new ArrayBuffer(n);ew(o,0,e,t,n);return o}function eR(e,t){const r=e[t];if(r===undefined||r===null){return undefined}if(typeof r!=="function"){throw new TypeError(`${String(t)} is not a function`)}return r}function eP(e){const t={[Symbol.iterator]:()=>e.iterator};const r=async function*(){return yield*t}();const n=r.next;return{iterator:r,nextMethod:n,done:false}}const eE=(e_=(ey=Symbol.asyncIterator)!==null&&ey!==void 0?ey:(em=Symbol.for)===null||em===void 0?void 0:em.call(Symbol,"Symbol.asyncIterator"))!==null&&e_!==void 0?e_:"@@asyncIterator";function eC(e,t="sync",n){if(n===undefined){if(t==="async"){n=eR(e,eE);if(n===undefined){const t=eR(e,Symbol.iterator);const r=eC(e,"sync",t);return eP(r)}}else{n=eR(e,Symbol.iterator)}}if(n===undefined){throw new TypeError("The object is not iterable")}const o=_(n,e,[]);if(!r(o)){throw new TypeError("The iterator method must return an object")}const i=o.next;return{iterator:o,nextMethod:i,done:false}}function eq(e){const t=_(e.nextMethod,e.iterator,[]);if(!r(t)){throw new TypeError("The iterator.next() method must return an object")}return t}function eA(e){return Boolean(e.done)}function ek(e){return e.value}function ej(e){if(typeof e!=="number"){return false}if(eb(e)){return false}if(e<0){return false}return true}function eB(e){const t=ev(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function eO(e){const t=e._queue.shift();e._queueTotalSize-=t.size;if(e._queueTotalSize<0){e._queueTotalSize=0}return t.value}function ez(e,t,r){if(!ej(r)||r===Infinity){throw new RangeError("Size must be a finite, non-NaN, non-negative number.")}e._queue.push({value:t,size:r});e._queueTotalSize+=r}function eW(e){const t=e._queue.peek();return t.value}function e$(e){e._queue=new S;e._queueTotalSize=0}function eL(e){return e===DataView}function eF(e){return eL(e.constructor)}function eM(e){if(eL(e)){return 1}return e.BYTES_PER_ELEMENT}class eI{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!eD(this)){throw tc("view")}return this._view}respond(e){if(!eD(this)){throw tc("respond")}H(e,1,"respond");e=Z(e,"First parameter");if(this._associatedReadableByteStreamController===undefined){throw new TypeError("This BYOB request has been invalidated")}if(eT(this._view.buffer)){throw new TypeError(`The BYOB request's buffer has been detached and so cannot be used as a response`)}ts(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!eD(this)){throw tc("respondWithNewView")}H(e,1,"respondWithNewView");if(!ArrayBuffer.isView(e)){throw new TypeError("You can only respond with array buffer views")}if(this._associatedReadableByteStreamController===undefined){throw new TypeError("This BYOB request has been invalidated")}if(eT(e.buffer)){throw new TypeError("The given view's buffer has been detached and so cannot be used as a response")}ta(this._associatedReadableByteStreamController,e)}}Object.defineProperties(eI.prototype,{respond:{enumerable:true},respondWithNewView:{enumerable:true},view:{enumerable:true}});o(eI.prototype.respond,"respond");o(eI.prototype.respondWithNewView,"respondWithNewView");if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(eI.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:true})}class ex{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!eU(this)){throw td("byobRequest")}return to(this)}get desiredSize(){if(!eU(this)){throw td("desiredSize")}return ti(this)}close(){if(!eU(this)){throw td("close")}if(this._closeRequested){throw new TypeError("The stream has already been closed; do not close it again!")}const e=this._controlledReadableByteStream._state;if(e!=="readable"){throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`)}te(this)}enqueue(e){if(!eU(this)){throw td("enqueue")}H(e,1,"enqueue");if(!ArrayBuffer.isView(e)){throw new TypeError("chunk must be an array buffer view")}if(e.byteLength===0){throw new TypeError("chunk must have non-zero byteLength")}if(e.buffer.byteLength===0){throw new TypeError(`chunk's buffer must have non-zero byteLength`)}if(this._closeRequested){throw new TypeError("stream is closed or draining")}const t=this._controlledReadableByteStream._state;if(t!=="readable"){throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`)}tt(this,e)}error(e=undefined){if(!eU(this)){throw td("error")}tr(this,e)}[R](e){eH(this);e$(this);const t=this._cancelAlgorithm(e);e9(this);return t}[P](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0){tn(this,e);return}const r=this._autoAllocateChunkSize;if(r!==undefined){let t;try{t=new ArrayBuffer(r)}catch(t){e._errorSteps(t);return}const n={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(n)}X(t,e);eN(this)}[E](){if(this._pendingPullIntos.length>0){const e=this._pendingPullIntos.peek();e.readerType="none";this._pendingPullIntos=new S;this._pendingPullIntos.push(e)}}}Object.defineProperties(ex.prototype,{close:{enumerable:true},enqueue:{enumerable:true},error:{enumerable:true},byobRequest:{enumerable:true},desiredSize:{enumerable:true}});o(ex.prototype.close,"close");o(ex.prototype.enqueue,"enqueue");o(ex.prototype.error,"error");if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(ex.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:true})}function eU(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")){return false}return e instanceof ex}function eD(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")){return false}return e instanceof eI}function eN(e){const t=e6(e);if(!t){return}if(e._pulling){e._pullAgain=true;return}e._pulling=true;const r=e._pullAlgorithm();d(r,()=>{e._pulling=false;if(e._pullAgain){e._pullAgain=false;eN(e)}return null},t=>{tr(e,t);return null})}function eH(e){e0(e);e._pendingPullIntos=new S}function eV(e,t){let r=false;if(e._state==="closed"){r=true}const n=eY(t);if(t.readerType==="default"){ee(e,n,r)}else{t_(e,n,r)}}function eY(e){const t=e.bytesFilled;const r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function eQ(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n});e._queueTotalSize+=n}function eG(e,t,r,n){let o;try{o=ev(t,r,r+n)}catch(t){tr(e,t);throw t}eQ(e,o,0,n)}function eZ(e,t){if(t.bytesFilled>0){eG(e,t.buffer,t.byteOffset,t.bytesFilled)}e4(e)}function eJ(e,t){const r=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled);const n=t.bytesFilled+r;let o=r;let i=false;const s=n%t.elementSize;const a=n-s;if(a>=t.minimumFill){o=a-t.bytesFilled;i=true}const u=e._queue;while(o>0){const r=u.peek();const n=Math.min(o,r.byteLength);const i=t.byteOffset+t.bytesFilled;ew(t.buffer,i,r.buffer,r.byteOffset,n);if(r.byteLength===n){u.shift()}else{r.byteOffset+=n;r.byteLength-=n}e._queueTotalSize-=n;eK(e,n,t);o-=n}return i}function eK(e,t,r){r.bytesFilled+=t}function eX(e){if(e._queueTotalSize===0&&e._closeRequested){e9(e);nS(e._controlledReadableByteStream)}else{eN(e)}}function e0(e){if(e._byobRequest===null){return}e._byobRequest._associatedReadableByteStreamController=undefined;e._byobRequest._view=null;e._byobRequest=null}function e1(e){while(e._pendingPullIntos.length>0){if(e._queueTotalSize===0){return}const t=e._pendingPullIntos.peek();if(eJ(e,t)){e4(e);eV(e._controlledReadableByteStream,t)}}}function e3(e){const t=e._controlledReadableByteStream._reader;while(t._readRequests.length>0){if(e._queueTotalSize===0){return}const r=t._readRequests.shift();tn(e,r)}}function e8(e,t,r,n){const o=e._controlledReadableByteStream;const i=t.constructor;const s=eM(i);const{byteOffset:a,byteLength:u}=t;const l=r*s;let f;try{f=eS(t.buffer)}catch(e){n._errorSteps(e);return}const c={buffer:f,bufferByteLength:f.byteLength,byteOffset:a,byteLength:u,bytesFilled:0,minimumFill:l,elementSize:s,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(c);tm(o,n);return}if(o._state==="closed"){const e=new i(c.buffer,c.byteOffset,0);n._closeSteps(e);return}if(e._queueTotalSize>0){if(eJ(e,c)){const t=eY(c);eX(e);n._chunkSteps(t);return}if(e._closeRequested){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");tr(e,t);n._errorSteps(t);return}}e._pendingPullIntos.push(c);tm(o,n);eN(e)}function e5(e,t){if(t.readerType==="none"){e4(e)}const r=e._controlledReadableByteStream;if(tw(r)){while(tg(r)>0){const t=e4(e);eV(r,t)}}}function e2(e,t,r){eK(e,t,r);if(r.readerType==="none"){eZ(e,r);e1(e);return}if(r.bytesFilled<r.minimumFill){return}e4(e);const n=r.bytesFilled%r.elementSize;if(n>0){const t=r.byteOffset+r.bytesFilled;eG(e,r.buffer,t-n,n)}r.bytesFilled-=n;eV(e._controlledReadableByteStream,r);e1(e)}function e7(e,t){const r=e._pendingPullIntos.peek();e0(e);const n=e._controlledReadableByteStream._state;if(n==="closed"){e5(e,r)}else{e2(e,t,r)}eN(e)}function e4(e){const t=e._pendingPullIntos.shift();return t}function e6(e){const t=e._controlledReadableByteStream;if(t._state!=="readable"){return false}if(e._closeRequested){return false}if(!e._started){return false}if(er(t)&&et(t)>0){return true}if(tw(t)&&tg(t)>0){return true}const r=ti(e);if(r>0){return true}return false}function e9(e){e._pullAlgorithm=undefined;e._cancelAlgorithm=undefined}function te(e){const t=e._controlledReadableByteStream;if(e._closeRequested||t._state!=="readable"){return}if(e._queueTotalSize>0){e._closeRequested=true;return}if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(t.bytesFilled%t.elementSize!==0){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");tr(e,t);throw t}}e9(e);nS(t)}function tt(e,t){const r=e._controlledReadableByteStream;if(e._closeRequested||r._state!=="readable"){return}const{buffer:n,byteOffset:o,byteLength:i}=t;if(eT(n)){throw new TypeError("chunk's buffer is detached and so cannot be enqueued")}const s=eS(n);if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(eT(t.buffer)){throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk")}e0(e);t.buffer=eS(t.buffer);if(t.readerType==="none"){eZ(e,t)}}if(er(r)){e3(e);if(et(r)===0){eQ(e,s,o,i)}else{if(e._pendingPullIntos.length>0){e4(e)}const t=new Uint8Array(s,o,i);ee(r,t,false)}}else if(tw(r)){eQ(e,s,o,i);e1(e)}else{eQ(e,s,o,i)}eN(e)}function tr(e,t){const r=e._controlledReadableByteStream;if(r._state!=="readable"){return}eH(e);e$(e);e9(e);nT(r,t)}function tn(e,t){const r=e._queue.shift();e._queueTotalSize-=r.byteLength;eX(e);const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(n)}function to(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();const r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled);const n=Object.create(eI.prototype);tf(n,e,r);e._byobRequest=n}return e._byobRequest}function ti(e){const t=e._controlledReadableByteStream._state;if(t==="errored"){return null}if(t==="closed"){return 0}return e._strategyHWM-e._queueTotalSize}function ts(e,t){const r=e._pendingPullIntos.peek();const n=e._controlledReadableByteStream._state;if(n==="closed"){if(t!==0){throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}}else{if(t===0){throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream")}if(r.bytesFilled+t>r.byteLength){throw new RangeError("bytesWritten out of range")}}r.buffer=eS(r.buffer);e7(e,t)}function ta(e,t){const r=e._pendingPullIntos.peek();const n=e._controlledReadableByteStream._state;if(n==="closed"){if(t.byteLength!==0){throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}}else{if(t.byteLength===0){throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream")}}if(r.byteOffset+r.bytesFilled!==t.byteOffset){throw new RangeError("The region specified by view does not match byobRequest")}if(r.bufferByteLength!==t.buffer.byteLength){throw new RangeError("The buffer of view has different capacity than byobRequest")}if(r.bytesFilled+t.byteLength>r.byteLength){throw new RangeError("The region specified by view is larger than byobRequest")}const o=t.byteLength;r.buffer=eS(t.buffer);e7(e,o)}function tu(e,t,r,n,o,i,s){t._controlledReadableByteStream=e;t._pullAgain=false;t._pulling=false;t._byobRequest=null;t._queue=t._queueTotalSize=undefined;e$(t);t._closeRequested=false;t._started=false;t._strategyHWM=i;t._pullAlgorithm=n;t._cancelAlgorithm=o;t._autoAllocateChunkSize=s;t._pendingPullIntos=new S;e._readableStreamController=t;const a=r();d(l(a),()=>{t._started=true;eN(t);return null},e=>{tr(t,e);return null})}function tl(e,t,r){const n=Object.create(ex.prototype);let o;let i;let s;if(t.start!==undefined){o=()=>t.start(n)}else{o=()=>undefined}if(t.pull!==undefined){i=()=>t.pull(n)}else{i=()=>l(undefined)}if(t.cancel!==undefined){s=e=>t.cancel(e)}else{s=()=>l(undefined)}const a=t.autoAllocateChunkSize;if(a===0){throw new TypeError("autoAllocateChunkSize must be greater than 0")}tu(e,n,o,i,s,r,a)}function tf(e,t,r){e._associatedReadableByteStreamController=t;e._view=r}function tc(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function td(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function th(e,t){x(e,t);const r=e===null||e===void 0?void 0:e.mode;return{mode:r===undefined?undefined:tp(r,`${t} has member 'mode' that`)}}function tp(e,t){e=`${e}`;if(e!=="byob"){throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`)}return e}function tb(e,t){var r;x(e,t);const n=(r=e===null||e===void 0?void 0:e.min)!==null&&r!==void 0?r:1;return{min:Z(n,`${t} has member 'min' that`)}}function ty(e){return new tS(e)}function tm(e,t){e._reader._readIntoRequests.push(t)}function t_(e,t,r){const n=e._reader;const o=n._readIntoRequests.shift();if(r){o._closeSteps(t)}else{o._chunkSteps(t)}}function tg(e){return e._reader._readIntoRequests.length}function tw(e){const t=e._reader;if(t===undefined){return false}if(!tT(t)){return false}return true}class tS{constructor(e){H(e,1,"ReadableStreamBYOBReader");J(e,"First parameter");if(ng(e)){throw new TypeError("This stream has already been locked for exclusive reading by another reader")}if(!eU(e._readableStreamController)){throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte "+"source")}C(this,e);this._readIntoRequests=new S}get closed(){if(!tT(this)){return f(tE("closed"))}return this._closedPromise}cancel(e=undefined){if(!tT(this)){return f(tE("cancel"))}if(this._ownerReadableStream===undefined){return f(k("cancel"))}return q(this,e)}read(e,t={}){if(!tT(this)){return f(tE("read"))}if(!ArrayBuffer.isView(e)){return f(new TypeError("view must be an array buffer view"))}if(e.byteLength===0){return f(new TypeError("view must have non-zero byteLength"))}if(e.buffer.byteLength===0){return f(new TypeError(`view's buffer must have non-zero byteLength`))}if(eT(e.buffer)){return f(new TypeError("view's buffer has been detached"))}let r;try{r=tb(t,"options")}catch(e){return f(e)}const n=r.min;if(n===0){return f(new TypeError("options.min must be greater than 0"))}if(!eF(e)){if(n>e.length){return f(new RangeError("options.min must be less than or equal to view's length"))}}else if(n>e.byteLength){return f(new RangeError("options.min must be less than or equal to view's byteLength"))}if(this._ownerReadableStream===undefined){return f(k("read from"))}let o;let i;const s=u((e,t)=>{o=e;i=t});const a={_chunkSteps:e=>o({value:e,done:false}),_closeSteps:e=>o({value:e,done:true}),_errorSteps:e=>i(e)};tv(this,e,n,a);return s}releaseLock(){if(!tT(this)){throw tE("releaseLock")}if(this._ownerReadableStream===undefined){return}tR(this)}}Object.defineProperties(tS.prototype,{cancel:{enumerable:true},read:{enumerable:true},releaseLock:{enumerable:true},closed:{enumerable:true}});o(tS.prototype.cancel,"cancel");o(tS.prototype.read,"read");o(tS.prototype.releaseLock,"releaseLock");if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(tS.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:true})}function tT(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")){return false}return e instanceof tS}function tv(e,t,r,n){const o=e._ownerReadableStream;o._disturbed=true;if(o._state==="errored"){n._errorSteps(o._storedError)}else{e8(o._readableStreamController,t,r,n)}}function tR(e){A(e);const t=new TypeError("Reader was released");tP(e,t)}function tP(e,t){const r=e._readIntoRequests;e._readIntoRequests=new S;r.forEach(e=>{e._errorSteps(t)})}function tE(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function tC(e,t){const{highWaterMark:r}=e;if(r===undefined){return t}if(eb(r)||r<0){throw new RangeError("Invalid highWaterMark")}return r}function tq(e){const{size:t}=e;if(!t){return()=>1}return t}function tA(e,t){x(e,t);const r=e===null||e===void 0?void 0:e.highWaterMark;const n=e===null||e===void 0?void 0:e.size;return{highWaterMark:r===undefined?undefined:Y(r),size:n===undefined?undefined:tk(n,`${t} has member 'size' that`)}}function tk(e,t){U(e,t);return t=>Y(e(t))}function tj(e,t){x(e,t);const r=e===null||e===void 0?void 0:e.abort;const n=e===null||e===void 0?void 0:e.close;const o=e===null||e===void 0?void 0:e.start;const i=e===null||e===void 0?void 0:e.type;const s=e===null||e===void 0?void 0:e.write;return{abort:r===undefined?undefined:tB(r,e,`${t} has member 'abort' that`),close:n===undefined?undefined:tO(n,e,`${t} has member 'close' that`),start:o===undefined?undefined:tz(o,e,`${t} has member 'start' that`),write:s===undefined?undefined:tW(s,e,`${t} has member 'write' that`),type:i}}function tB(e,t,r){U(e,r);return r=>g(e,t,[r])}function tO(e,t,r){U(e,r);return()=>g(e,t,[])}function tz(e,t,r){U(e,r);return r=>_(e,t,[r])}function tW(e,t,r){U(e,r);return(r,n)=>g(e,t,[r,n])}function t$(e,t){if(!tN(e)){throw new TypeError(`${t} is not a WritableStream.`)}}function tL(e){if(typeof e!=="object"||e===null){return false}try{return typeof e.aborted==="boolean"}catch(e){return false}}const tF=typeof AbortController==="function";function tM(){if(tF){return new AbortController}return undefined}class tI{constructor(e={},t={}){if(e===undefined){e=null}else{N(e,"First parameter")}const r=tA(t,"Second parameter");const n=tj(e,"First parameter");tD(this);const o=n.type;if(o!==undefined){throw new RangeError("Invalid type is specified")}const i=tq(r);const s=tC(r,1);rd(this,n,s,i)}get locked(){if(!tN(this)){throw rR("locked")}return tH(this)}abort(e=undefined){if(!tN(this)){return f(rR("abort"))}if(tH(this)){return f(new TypeError("Cannot abort a stream that already has a writer"))}return tV(this,e)}close(){if(!tN(this)){return f(rR("close"))}if(tH(this)){return f(new TypeError("Cannot close a stream that already has a writer"))}if(t3(this)){return f(new TypeError("Cannot close an already-closing stream"))}return tY(this)}getWriter(){if(!tN(this)){throw rR("getWriter")}return tx(this)}}Object.defineProperties(tI.prototype,{abort:{enumerable:true},close:{enumerable:true},getWriter:{enumerable:true},locked:{enumerable:true}});o(tI.prototype.abort,"abort");o(tI.prototype.close,"close");o(tI.prototype.getWriter,"getWriter");if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(tI.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:true})}function tx(e){return new t6(e)}function tU(e,t,r,n,o=1,i=()=>1){const s=Object.create(tI.prototype);tD(s);const a=Object.create(rl.prototype);rc(s,a,e,t,r,n,o,i);return s}function tD(e){e._state="writable";e._storedError=undefined;e._writer=undefined;e._writableStreamController=undefined;e._writeRequests=new S;e._inFlightWriteRequest=undefined;e._closeRequest=undefined;e._inFlightCloseRequest=undefined;e._pendingAbortRequest=undefined;e._backpressure=false}function tN(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")){return false}return e instanceof tI}function tH(e){if(e._writer===undefined){return false}return true}function tV(e,t){var r;if(e._state==="closed"||e._state==="errored"){return l(undefined)}e._writableStreamController._abortReason=t;(r=e._writableStreamController._abortController)===null||r===void 0?void 0:r.abort(t);const n=e._state;if(n==="closed"||n==="errored"){return l(undefined)}if(e._pendingAbortRequest!==undefined){return e._pendingAbortRequest._promise}let o=false;if(n==="erroring"){o=true;t=undefined}const i=u((r,n)=>{e._pendingAbortRequest={_promise:undefined,_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:o}});e._pendingAbortRequest._promise=i;if(!o){tZ(e,t)}return i}function tY(e){const t=e._state;if(t==="closed"||t==="errored"){return f(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`))}const r=u((t,r)=>{const n={_resolve:t,_reject:r};e._closeRequest=n});const n=e._writer;if(n!==undefined&&e._backpressure&&t==="writable"){rI(n)}rp(e._writableStreamController);return r}function tQ(e){const t=u((t,r)=>{const n={_resolve:t,_reject:r};e._writeRequests.push(n)});return t}function tG(e,t){const r=e._state;if(r==="writable"){tZ(e,t);return}tJ(e)}function tZ(e,t){const r=e._writableStreamController;e._state="erroring";e._storedError=t;const n=e._writer;if(n!==undefined){ro(n,t)}if(!t8(e)&&r._started){tJ(e)}}function tJ(e){e._state="errored";e._writableStreamController[v]();const t=e._storedError;e._writeRequests.forEach(e=>{e._reject(t)});e._writeRequests=new S;if(e._pendingAbortRequest===undefined){t7(e);return}const r=e._pendingAbortRequest;e._pendingAbortRequest=undefined;if(r._wasAlreadyErroring){r._reject(t);t7(e);return}const n=e._writableStreamController[T](r._reason);d(n,()=>{r._resolve();t7(e);return null},t=>{r._reject(t);t7(e);return null})}function tK(e){e._inFlightWriteRequest._resolve(undefined);e._inFlightWriteRequest=undefined}function tX(e,t){e._inFlightWriteRequest._reject(t);e._inFlightWriteRequest=undefined;tG(e,t)}function t0(e){e._inFlightCloseRequest._resolve(undefined);e._inFlightCloseRequest=undefined;const t=e._state;if(t==="erroring"){e._storedError=undefined;if(e._pendingAbortRequest!==undefined){e._pendingAbortRequest._resolve();e._pendingAbortRequest=undefined}}e._state="closed";const r=e._writer;if(r!==undefined){rO(r)}}function t1(e,t){e._inFlightCloseRequest._reject(t);e._inFlightCloseRequest=undefined;if(e._pendingAbortRequest!==undefined){e._pendingAbortRequest._reject(t);e._pendingAbortRequest=undefined}tG(e,t)}function t3(e){if(e._closeRequest===undefined&&e._inFlightCloseRequest===undefined){return false}return true}function t8(e){if(e._inFlightWriteRequest===undefined&&e._inFlightCloseRequest===undefined){return false}return true}function t5(e){e._inFlightCloseRequest=e._closeRequest;e._closeRequest=undefined}function t2(e){e._inFlightWriteRequest=e._writeRequests.shift()}function t7(e){if(e._closeRequest!==undefined){e._closeRequest._reject(e._storedError);e._closeRequest=undefined}const t=e._writer;if(t!==undefined){rj(t,e._storedError)}}function t4(e,t){const r=e._writer;if(r!==undefined&&t!==e._backpressure){if(t){rF(r)}else{rI(r)}}e._backpressure=t}class t6{constructor(e){H(e,1,"WritableStreamDefaultWriter");t$(e,"First parameter");if(tH(e)){throw new TypeError("This stream has already been locked for exclusive writing by another writer")}this._ownerWritableStream=e;e._writer=this;const t=e._state;if(t==="writable"){if(!t3(e)&&e._backpressure){rz(this)}else{r$(this)}rq(this)}else if(t==="erroring"){rW(this,e._storedError);rq(this)}else if(t==="closed"){r$(this);rk(this)}else{const t=e._storedError;rW(this,t);rA(this,t)}}get closed(){if(!t9(this)){return f(rE("closed"))}return this._closedPromise}get desiredSize(){if(!t9(this)){throw rE("desiredSize")}if(this._ownerWritableStream===undefined){throw rC("desiredSize")}return ri(this)}get ready(){if(!t9(this)){return f(rE("ready"))}return this._readyPromise}abort(e=undefined){if(!t9(this)){return f(rE("abort"))}if(this._ownerWritableStream===undefined){return f(rC("abort"))}return re(this,e)}close(){if(!t9(this)){return f(rE("close"))}const e=this._ownerWritableStream;if(e===undefined){return f(rC("close"))}if(t3(e)){return f(new TypeError("Cannot close an already-closing stream"))}return rt(this)}releaseLock(){if(!t9(this)){throw rE("releaseLock")}const e=this._ownerWritableStream;if(e===undefined){return}rs(this)}write(e=undefined){if(!t9(this)){return f(rE("write"))}if(this._ownerWritableStream===undefined){return f(rC("write to"))}return ra(this,e)}}Object.defineProperties(t6.prototype,{abort:{enumerable:true},close:{enumerable:true},releaseLock:{enumerable:true},write:{enumerable:true},closed:{enumerable:true},desiredSize:{enumerable:true},ready:{enumerable:true}});o(t6.prototype.abort,"abort");o(t6.prototype.close,"close");o(t6.prototype.releaseLock,"releaseLock");o(t6.prototype.write,"write");if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(t6.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:true})}function t9(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")){return false}return e instanceof t6}function re(e,t){const r=e._ownerWritableStream;return tV(r,t)}function rt(e){const t=e._ownerWritableStream;return tY(t)}function rr(e){const t=e._ownerWritableStream;const r=t._state;if(t3(t)||r==="closed"){return l(undefined)}if(r==="errored"){return f(t._storedError)}return rt(e)}function rn(e,t){if(e._closedPromiseState==="pending"){rj(e,t)}else{rB(e,t)}}function ro(e,t){if(e._readyPromiseState==="pending"){rL(e,t)}else{rM(e,t)}}function ri(e){const t=e._ownerWritableStream;const r=t._state;if(r==="errored"||r==="erroring"){return null}if(r==="closed"){return 0}return ry(t._writableStreamController)}function rs(e){const t=e._ownerWritableStream;const r=new TypeError(`Writer was released and can no longer be used to monitor the stream's closedness`);ro(e,r);rn(e,r);t._writer=undefined;e._ownerWritableStream=undefined}function ra(e,t){const r=e._ownerWritableStream;const n=r._writableStreamController;const o=rb(n,t);if(r!==e._ownerWritableStream){return f(rC("write to"))}const i=r._state;if(i==="errored"){return f(r._storedError)}if(t3(r)||i==="closed"){return f(new TypeError("The stream is closing or closed and cannot be written to"))}if(i==="erroring"){return f(r._storedError)}const s=tQ(r);rm(n,t,o);return s}const ru={};class rl{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!rf(this)){throw rP("abortReason")}return this._abortReason}get signal(){if(!rf(this)){throw rP("signal")}if(this._abortController===undefined){throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported")}return this._abortController.signal}error(e=undefined){if(!rf(this)){throw rP("error")}const t=this._controlledWritableStream._state;if(t!=="writable"){return}rv(this,e)}[T](e){const t=this._abortAlgorithm(e);rh(this);return t}[v](){e$(this)}}Object.defineProperties(rl.prototype,{abortReason:{enumerable:true},signal:{enumerable:true},error:{enumerable:true}});if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(rl.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:true})}function rf(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")){return false}return e instanceof rl}function rc(e,t,r,n,o,i,s,a){t._controlledWritableStream=e;e._writableStreamController=t;t._queue=undefined;t._queueTotalSize=undefined;e$(t);t._abortReason=undefined;t._abortController=tM();t._started=false;t._strategySizeAlgorithm=a;t._strategyHWM=s;t._writeAlgorithm=n;t._closeAlgorithm=o;t._abortAlgorithm=i;const u=rT(t);t4(e,u);const f=r();const c=l(f);d(c,()=>{t._started=true;r_(t);return null},r=>{t._started=true;tG(e,r);return null})}function rd(e,t,r,n){const o=Object.create(rl.prototype);let i;let s;let a;let u;if(t.start!==undefined){i=()=>t.start(o)}else{i=()=>undefined}if(t.write!==undefined){s=e=>t.write(e,o)}else{s=()=>l(undefined)}if(t.close!==undefined){a=()=>t.close()}else{a=()=>l(undefined)}if(t.abort!==undefined){u=e=>t.abort(e)}else{u=()=>l(undefined)}rc(e,o,i,s,a,u,r,n)}function rh(e){e._writeAlgorithm=undefined;e._closeAlgorithm=undefined;e._abortAlgorithm=undefined;e._strategySizeAlgorithm=undefined}function rp(e){ez(e,ru,0);r_(e)}function rb(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){rg(e,t);return 1}}function ry(e){return e._strategyHWM-e._queueTotalSize}function rm(e,t,r){try{ez(e,t,r)}catch(t){rg(e,t);return}const n=e._controlledWritableStream;if(!t3(n)&&n._state==="writable"){const t=rT(e);t4(n,t)}r_(e)}function r_(e){const t=e._controlledWritableStream;if(!e._started){return}if(t._inFlightWriteRequest!==undefined){return}const r=t._state;if(r==="erroring"){tJ(t);return}if(e._queue.length===0){return}const n=eW(e);if(n===ru){rw(e)}else{rS(e,n)}}function rg(e,t){if(e._controlledWritableStream._state==="writable"){rv(e,t)}}function rw(e){const t=e._controlledWritableStream;t5(t);eO(e);const r=e._closeAlgorithm();rh(e);d(r,()=>{t0(t);return null},e=>{t1(t,e);return null})}function rS(e,t){const r=e._controlledWritableStream;t2(r);const n=e._writeAlgorithm(t);d(n,()=>{tK(r);const t=r._state;eO(e);if(!t3(r)&&t==="writable"){const t=rT(e);t4(r,t)}r_(e);return null},t=>{if(r._state==="writable"){rh(e)}tX(r,t);return null})}function rT(e){const t=ry(e);return t<=0}function rv(e,t){const r=e._controlledWritableStream;rh(e);tZ(r,t)}function rR(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function rP(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function rE(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function rC(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function rq(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t;e._closedPromise_reject=r;e._closedPromiseState="pending"})}function rA(e,t){rq(e);rj(e,t)}function rk(e){rq(e);rO(e)}function rj(e,t){if(e._closedPromise_reject===undefined){return}y(e._closedPromise);e._closedPromise_reject(t);e._closedPromise_resolve=undefined;e._closedPromise_reject=undefined;e._closedPromiseState="rejected"}function rB(e,t){rA(e,t)}function rO(e){if(e._closedPromise_resolve===undefined){return}e._closedPromise_resolve(undefined);e._closedPromise_resolve=undefined;e._closedPromise_reject=undefined;e._closedPromiseState="resolved"}function rz(e){e._readyPromise=u((t,r)=>{e._readyPromise_resolve=t;e._readyPromise_reject=r});e._readyPromiseState="pending"}function rW(e,t){rz(e);rL(e,t)}function r$(e){rz(e);rI(e)}function rL(e,t){if(e._readyPromise_reject===undefined){return}y(e._readyPromise);e._readyPromise_reject(t);e._readyPromise_resolve=undefined;e._readyPromise_reject=undefined;e._readyPromiseState="rejected"}function rF(e){rz(e)}function rM(e,t){rW(e,t)}function rI(e){if(e._readyPromise_resolve===undefined){return}e._readyPromise_resolve(undefined);e._readyPromise_resolve=undefined;e._readyPromise_reject=undefined;e._readyPromiseState="fulfilled"}function rx(){if(typeof globalThis!=="undefined"){return globalThis}else if(typeof self!=="undefined"){return self}else if(typeof global!=="undefined"){return global}return undefined}const rU=rx();function rD(e){if(!(typeof e==="function"||typeof e==="object")){return false}if(e.name!=="DOMException"){return false}try{new e;return true}catch(e){return false}}function rN(){const e=rU===null||rU===void 0?void 0:rU.DOMException;return rD(e)?e:undefined}function rH(){const e=function e(e,t){this.message=e||"";this.name=t||"Error";if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}};o(e,"DOMException");e.prototype=Object.create(Error.prototype);Object.defineProperty(e.prototype,"constructor",{value:e,writable:true,configurable:true});return e}const rV=rN()||rH();function rY(e,r,n,o,i,s){const a=K(e);const f=tx(r);e._disturbed=true;let b=false;let m=l(undefined);return u((_,g)=>{let w;if(s!==undefined){w=()=>{const t=s.reason!==undefined?s.reason:new rV("Aborted","AbortError");const n=[];if(!o){n.push(()=>{if(r._state==="writable"){return tV(r,t)}return l(undefined)})}if(!i){n.push(()=>{if(e._state==="readable"){return nw(e,t)}return l(undefined)})}E(()=>Promise.all(n.map(e=>e())),true,t)};if(s.aborted){w();return}s.addEventListener("abort",w)}function S(){return u((e,t)=>{function r(n){if(n){e()}else{c(T(),r,t)}}r(false)})}function T(){if(b){return l(true)}return c(f._readyPromise,()=>{return u((e,r)=>{ei(a,{_chunkSteps:r=>{m=c(ra(f,r),undefined,t);e(false)},_closeSteps:()=>e(true),_errorSteps:r})})})}R(e,a._closedPromise,e=>{if(!o){E(()=>tV(r,e),true,e)}else{C(true,e)}return null});R(r,f._closedPromise,t=>{if(!i){E(()=>nw(e,t),true,t)}else{C(true,t)}return null});P(e,a._closedPromise,()=>{if(!n){E(()=>rr(f))}else{C()}return null});if(t3(r)||r._state==="closed"){const t=new TypeError("the destination writable stream closed before all data could be piped to it");if(!i){E(()=>nw(e,t),true,t)}else{C(true,t)}}y(S());function v(){const e=m;return c(m,()=>e!==m?v():undefined)}function R(e,t,r){if(e._state==="errored"){r(e._storedError)}else{p(t,r)}}function P(e,t,r){if(e._state==="closed"){r()}else{h(t,r)}}function E(e,t,n){if(b){return}b=true;if(r._state==="writable"&&!t3(r)){h(v(),o)}else{o()}function o(){d(e(),()=>q(t,n),e=>q(true,e));return null}}function C(e,t){if(b){return}b=true;if(r._state==="writable"&&!t3(r)){h(v(),()=>q(e,t))}else{q(e,t)}}function q(e,t){rs(f);A(a);if(s!==undefined){s.removeEventListener("abort",w)}if(e){g(t)}else{_(undefined)}return null}})}class rQ{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!rG(this)){throw r4("desiredSize")}return r3(this)}close(){if(!rG(this)){throw r4("close")}if(!r5(this)){throw new TypeError("The stream is not in a state that permits close")}rX(this)}enqueue(e=undefined){if(!rG(this)){throw r4("enqueue")}if(!r5(this)){throw new TypeError("The stream is not in a state that permits enqueue")}return r0(this,e)}error(e=undefined){if(!rG(this)){throw r4("error")}r1(this,e)}[R](e){e$(this);const t=this._cancelAlgorithm(e);rK(this);return t}[P](e){const t=this._controlledReadableStream;if(this._queue.length>0){const r=eO(this);if(this._closeRequested&&this._queue.length===0){rK(this);nS(t)}else{rZ(this)}e._chunkSteps(r)}else{X(t,e);rZ(this)}}[E](){}}Object.defineProperties(rQ.prototype,{close:{enumerable:true},enqueue:{enumerable:true},error:{enumerable:true},desiredSize:{enumerable:true}});o(rQ.prototype.close,"close");o(rQ.prototype.enqueue,"enqueue");o(rQ.prototype.error,"error");if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(rQ.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:true})}function rG(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")){return false}return e instanceof rQ}function rZ(e){const t=rJ(e);if(!t){return}if(e._pulling){e._pullAgain=true;return}e._pulling=true;const r=e._pullAlgorithm();d(r,()=>{e._pulling=false;if(e._pullAgain){e._pullAgain=false;rZ(e)}return null},t=>{r1(e,t);return null})}function rJ(e){const t=e._controlledReadableStream;if(!r5(e)){return false}if(!e._started){return false}if(ng(t)&&et(t)>0){return true}const r=r3(e);if(r>0){return true}return false}function rK(e){e._pullAlgorithm=undefined;e._cancelAlgorithm=undefined;e._strategySizeAlgorithm=undefined}function rX(e){if(!r5(e)){return}const t=e._controlledReadableStream;e._closeRequested=true;if(e._queue.length===0){rK(e);nS(t)}}function r0(e,t){if(!r5(e)){return}const r=e._controlledReadableStream;if(ng(r)&&et(r)>0){ee(r,t,false)}else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){r1(e,t);throw t}try{ez(e,t,r)}catch(t){r1(e,t);throw t}}rZ(e)}function r1(e,t){const r=e._controlledReadableStream;if(r._state!=="readable"){return}e$(e);rK(e);nT(r,t)}function r3(e){const t=e._controlledReadableStream._state;if(t==="errored"){return null}if(t==="closed"){return 0}return e._strategyHWM-e._queueTotalSize}function r8(e){if(rJ(e)){return false}return true}function r5(e){const t=e._controlledReadableStream._state;if(!e._closeRequested&&t==="readable"){return true}return false}function r2(e,t,r,n,o,i,s){t._controlledReadableStream=e;t._queue=undefined;t._queueTotalSize=undefined;e$(t);t._started=false;t._closeRequested=false;t._pullAgain=false;t._pulling=false;t._strategySizeAlgorithm=s;t._strategyHWM=i;t._pullAlgorithm=n;t._cancelAlgorithm=o;e._readableStreamController=t;const a=r();d(l(a),()=>{t._started=true;rZ(t);return null},e=>{r1(t,e);return null})}function r7(e,t,r,n){const o=Object.create(rQ.prototype);let i;let s;let a;if(t.start!==undefined){i=()=>t.start(o)}else{i=()=>undefined}if(t.pull!==undefined){s=()=>t.pull(o)}else{s=()=>l(undefined)}if(t.cancel!==undefined){a=e=>t.cancel(e)}else{a=()=>l(undefined)}r2(e,o,i,s,a,r,n)}function r4(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function r6(e,t){if(eU(e._readableStreamController)){return ne(e)}return r9(e)}function r9(e,t){const r=K(e);let n=false;let o=false;let i=false;let s=false;let a;let f;let c;let d;let h;const b=u(e=>{h=e});function y(){if(n){o=true;return l(undefined)}n=true;const e={_chunkSteps:e=>{m(()=>{o=false;const t=e;const r=e;if(!i){r0(c._readableStreamController,t)}if(!s){r0(d._readableStreamController,r)}n=false;if(o){y()}})},_closeSteps:()=>{n=false;if(!i){rX(c._readableStreamController)}if(!s){rX(d._readableStreamController)}if(!i||!s){h(undefined)}},_errorSteps:()=>{n=false}};ei(r,e);return l(undefined)}function _(t){i=true;a=t;if(s){const t=eg([a,f]);const r=nw(e,t);h(r)}return b}function g(t){s=true;f=t;if(i){const t=eg([a,f]);const r=nw(e,t);h(r)}return b}function w(){}c=nb(w,y,_);d=nb(w,y,g);p(r._closedPromise,e=>{r1(c._readableStreamController,e);r1(d._readableStreamController,e);if(!i||!s){h(undefined)}return null});return[c,d]}function ne(e){let t=K(e);let r=false;let n=false;let o=false;let i=false;let s=false;let a;let f;let c;let d;let h;const b=u(e=>{h=e});function y(e){p(e._closedPromise,r=>{if(e!==t){return null}tr(c._readableStreamController,r);tr(d._readableStreamController,r);if(!i||!s){h(undefined)}return null})}function _(){if(tT(t)){A(t);t=K(e);y(t)}const a={_chunkSteps:t=>{m(()=>{n=false;o=false;const a=t;let u=t;if(!i&&!s){try{u=eB(t)}catch(t){tr(c._readableStreamController,t);tr(d._readableStreamController,t);h(nw(e,t));return}}if(!i){tt(c._readableStreamController,a)}if(!s){tt(d._readableStreamController,u)}r=false;if(n){w()}else if(o){S()}})},_closeSteps:()=>{r=false;if(!i){te(c._readableStreamController)}if(!s){te(d._readableStreamController)}if(c._readableStreamController._pendingPullIntos.length>0){ts(c._readableStreamController,0)}if(d._readableStreamController._pendingPullIntos.length>0){ts(d._readableStreamController,0)}if(!i||!s){h(undefined)}},_errorSteps:()=>{r=false}};ei(t,a)}function g(a,u){if(eo(t)){A(t);t=ty(e);y(t)}const l=u?d:c;const f=u?c:d;const p={_chunkSteps:t=>{m(()=>{n=false;o=false;const a=u?s:i;const c=u?i:s;if(!c){let r;try{r=eB(t)}catch(t){tr(l._readableStreamController,t);tr(f._readableStreamController,t);h(nw(e,t));return}if(!a){ta(l._readableStreamController,t)}tt(f._readableStreamController,r)}else if(!a){ta(l._readableStreamController,t)}r=false;if(n){w()}else if(o){S()}})},_closeSteps:e=>{r=false;const t=u?s:i;const n=u?i:s;if(!t){te(l._readableStreamController)}if(!n){te(f._readableStreamController)}if(e!==undefined){if(!t){ta(l._readableStreamController,e)}if(!n&&f._readableStreamController._pendingPullIntos.length>0){ts(f._readableStreamController,0)}}if(!t||!n){h(undefined)}},_errorSteps:()=>{r=false}};tv(t,a,1,p)}function w(){if(r){n=true;return l(undefined)}r=true;const e=to(c._readableStreamController);if(e===null){_()}else{g(e._view,false)}return l(undefined)}function S(){if(r){o=true;return l(undefined)}r=true;const e=to(d._readableStreamController);if(e===null){_()}else{g(e._view,true)}return l(undefined)}function T(t){i=true;a=t;if(s){const t=eg([a,f]);const r=nw(e,t);h(r)}return b}function v(t){s=true;f=t;if(i){const t=eg([a,f]);const r=nw(e,t);h(r)}return b}function R(){return}c=ny(R,w,T);d=ny(R,S,v);y(t);return[c,d]}function nt(e){return r(e)&&typeof e.getReader!=="undefined"}function nr(e){if(nt(e)){return no(e.getReader())}return nn(e)}function nn(e){let n;const o=eC(e,"async");const i=t;function s(){let e;try{e=eq(o)}catch(e){return f(e)}const t=l(e);return b(t,e=>{if(!r(e)){throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object")}const t=eA(e);if(t){rX(n._readableStreamController)}else{const t=ek(e);r0(n._readableStreamController,t)}})}function a(e){const t=o.iterator;let n;try{n=eR(t,"return")}catch(e){return f(e)}if(n===undefined){return l(undefined)}let i;try{i=_(n,t,[e])}catch(e){return f(e)}const s=l(i);return b(s,e=>{if(!r(e)){throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")}return undefined})}n=nb(i,s,a,0);return n}function no(e){let n;const o=t;function i(){let t;try{t=e.read()}catch(e){return f(e)}return b(t,e=>{if(!r(e)){throw new TypeError("The promise returned by the reader.read() method must fulfill with an object")}if(e.done){rX(n._readableStreamController)}else{const t=e.value;r0(n._readableStreamController,t)}})}function s(t){try{return l(e.cancel(t))}catch(e){return f(e)}}n=nb(o,i,s,0);return n}function ni(e,t){x(e,t);const r=e;const n=r===null||r===void 0?void 0:r.autoAllocateChunkSize;const o=r===null||r===void 0?void 0:r.cancel;const i=r===null||r===void 0?void 0:r.pull;const s=r===null||r===void 0?void 0:r.start;const a=r===null||r===void 0?void 0:r.type;return{autoAllocateChunkSize:n===undefined?undefined:Z(n,`${t} has member 'autoAllocateChunkSize' that`),cancel:o===undefined?undefined:ns(o,r,`${t} has member 'cancel' that`),pull:i===undefined?undefined:na(i,r,`${t} has member 'pull' that`),start:s===undefined?undefined:nu(s,r,`${t} has member 'start' that`),type:a===undefined?undefined:nl(a,`${t} has member 'type' that`)}}function ns(e,t,r){U(e,r);return r=>g(e,t,[r])}function na(e,t,r){U(e,r);return r=>g(e,t,[r])}function nu(e,t,r){U(e,r);return r=>_(e,t,[r])}function nl(e,t){e=`${e}`;if(e!=="bytes"){throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`)}return e}function nf(e,t){x(e,t);const r=e===null||e===void 0?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}function nc(e,t){x(e,t);const r=e===null||e===void 0?void 0:e.preventAbort;const n=e===null||e===void 0?void 0:e.preventCancel;const o=e===null||e===void 0?void 0:e.preventClose;const i=e===null||e===void 0?void 0:e.signal;if(i!==undefined){nd(i,`${t} has member 'signal' that`)}return{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:i}}function nd(e,t){if(!tL(e)){throw new TypeError(`${t} is not an AbortSignal.`)}}function nh(e,t){x(e,t);const r=e===null||e===void 0?void 0:e.readable;V(r,"readable","ReadableWritablePair");J(r,`${t} has member 'readable' that`);const n=e===null||e===void 0?void 0:e.writable;V(n,"writable","ReadableWritablePair");t$(n,`${t} has member 'writable' that`);return{readable:r,writable:n}}class np{constructor(e={},t={}){if(e===undefined){e=null}else{N(e,"First parameter")}const r=tA(t,"Second parameter");const n=ni(e,"First parameter");nm(this);if(n.type==="bytes"){if(r.size!==undefined){throw new RangeError("The strategy for a byte stream cannot have a size function")}const e=tC(r,0);tl(this,n,e)}else{const e=tq(r);const t=tC(r,1);r7(this,n,t,e)}}get locked(){if(!n_(this)){throw nv("locked")}return ng(this)}cancel(e=undefined){if(!n_(this)){return f(nv("cancel"))}if(ng(this)){return f(new TypeError("Cannot cancel a stream that already has a reader"))}return nw(this,e)}getReader(e=undefined){if(!n_(this)){throw nv("getReader")}const t=th(e,"First parameter");if(t.mode===undefined){return K(this)}return ty(this)}pipeThrough(e,t={}){if(!n_(this)){throw nv("pipeThrough")}H(e,1,"pipeThrough");const r=nh(e,"First parameter");const n=nc(t,"Second parameter");if(ng(this)){throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream")}if(tH(r.writable)){throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream")}const o=rY(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal);y(o);return r.readable}pipeTo(e,t={}){if(!n_(this)){return f(nv("pipeTo"))}if(e===undefined){return f(`Parameter 1 is required in 'pipeTo'.`)}if(!tN(e)){return f(new TypeError(`ReadableStream.prototype.pipeTo's first argument must be a WritableStream`))}let r;try{r=nc(t,"Second parameter")}catch(e){return f(e)}if(ng(this)){return f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"))}if(tH(e)){return f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"))}return rY(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!n_(this)){throw nv("tee")}const e=r6(this);return eg(e)}values(e=undefined){if(!n_(this)){throw nv("values")}const t=nf(e,"First parameter");return ed(this,t.preventCancel)}[eE](e){return this.values(e)}static from(e){return nr(e)}}Object.defineProperties(np,{from:{enumerable:true}});Object.defineProperties(np.prototype,{cancel:{enumerable:true},getReader:{enumerable:true},pipeThrough:{enumerable:true},pipeTo:{enumerable:true},tee:{enumerable:true},values:{enumerable:true},locked:{enumerable:true}});o(np.from,"from");o(np.prototype.cancel,"cancel");o(np.prototype.getReader,"getReader");o(np.prototype.pipeThrough,"pipeThrough");o(np.prototype.pipeTo,"pipeTo");o(np.prototype.tee,"tee");o(np.prototype.values,"values");if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(np.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:true})}Object.defineProperty(np.prototype,eE,{value:np.prototype.values,writable:true,configurable:true});function nb(e,t,r,n=1,o=()=>1){const i=Object.create(np.prototype);nm(i);const s=Object.create(rQ.prototype);r2(i,s,e,t,r,n,o);return i}function ny(e,t,r){const n=Object.create(np.prototype);nm(n);const o=Object.create(ex.prototype);tu(n,o,e,t,r,0,undefined);return n}function nm(e){e._state="readable";e._reader=undefined;e._storedError=undefined;e._disturbed=false}function n_(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")){return false}return e instanceof np}function ng(e){if(e._reader===undefined){return false}return true}function nw(e,r){e._disturbed=true;if(e._state==="closed"){return l(undefined)}if(e._state==="errored"){return f(e._storedError)}nS(e);const n=e._reader;if(n!==undefined&&tT(n)){const e=n._readIntoRequests;n._readIntoRequests=new S;e.forEach(e=>{e._closeSteps(undefined)})}const o=e._readableStreamController[R](r);return b(o,t)}function nS(e){e._state="closed";const t=e._reader;if(t===undefined){return}$(t);if(eo(t)){const e=t._readRequests;t._readRequests=new S;e.forEach(e=>{e._closeSteps()})}}function nT(e,t){e._state="errored";e._storedError=t;const r=e._reader;if(r===undefined){return}z(r,t);if(eo(r)){ea(r,t)}else{tP(r,t)}}function nv(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function nR(e,t){x(e,t);const r=e===null||e===void 0?void 0:e.highWaterMark;V(r,"highWaterMark","QueuingStrategyInit");return{highWaterMark:Y(r)}}const nP=e=>{return e.byteLength};o(nP,"size");class nE{constructor(e){H(e,1,"ByteLengthQueuingStrategy");e=nR(e,"First parameter");this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!nq(this)){throw nC("highWaterMark")}return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!nq(this)){throw nC("size")}return nP}}Object.defineProperties(nE.prototype,{highWaterMark:{enumerable:true},size:{enumerable:true}});if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(nE.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:true})}function nC(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function nq(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")){return false}return e instanceof nE}const nA=()=>{return 1};o(nA,"size");class nk{constructor(e){H(e,1,"CountQueuingStrategy");e=nR(e,"First parameter");this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!nB(this)){throw nj("highWaterMark")}return this._countQueuingStrategyHighWaterMark}get size(){if(!nB(this)){throw nj("size")}return nA}}Object.defineProperties(nk.prototype,{highWaterMark:{enumerable:true},size:{enumerable:true}});if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(nk.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:true})}function nj(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function nB(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")){return false}return e instanceof nk}function nO(e,t){x(e,t);const r=e===null||e===void 0?void 0:e.cancel;const n=e===null||e===void 0?void 0:e.flush;const o=e===null||e===void 0?void 0:e.readableType;const i=e===null||e===void 0?void 0:e.start;const s=e===null||e===void 0?void 0:e.transform;const a=e===null||e===void 0?void 0:e.writableType;return{cancel:r===undefined?undefined:nL(r,e,`${t} has member 'cancel' that`),flush:n===undefined?undefined:nz(n,e,`${t} has member 'flush' that`),readableType:o,start:i===undefined?undefined:nW(i,e,`${t} has member 'start' that`),transform:s===undefined?undefined:n$(s,e,`${t} has member 'transform' that`),writableType:a}}function nz(e,t,r){U(e,r);return r=>g(e,t,[r])}function nW(e,t,r){U(e,r);return r=>_(e,t,[r])}function n$(e,t,r){U(e,r);return(r,n)=>g(e,t,[r,n])}function nL(e,t,r){U(e,r);return r=>g(e,t,[r])}class nF{constructor(e={},t={},r={}){if(e===undefined){e=null}const n=tA(t,"Second parameter");const o=tA(r,"Third parameter");const i=nO(e,"First parameter");if(i.readableType!==undefined){throw new RangeError("Invalid readableType specified")}if(i.writableType!==undefined){throw new RangeError("Invalid writableType specified")}const s=tC(o,0);const a=tq(o);const l=tC(n,1);const f=tq(n);let c;const d=u(e=>{c=e});nM(this,d,l,f,s,a);nQ(this,i);if(i.start!==undefined){c(i.start(this._transformStreamController))}else{c(undefined)}}get readable(){if(!nI(this)){throw n6("readable")}return this._readable}get writable(){if(!nI(this)){throw n6("writable")}return this._writable}}Object.defineProperties(nF.prototype,{readable:{enumerable:true},writable:{enumerable:true}});if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(nF.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:true})}function nM(e,t,r,n,o,i){function s(){return t}function a(t){return n0(e,t)}function u(t){return n1(e,t)}function l(){return n3(e)}e._writable=tU(s,a,l,u,r,n);function f(){return n8(e)}function c(t){return n5(e,t)}e._readable=nb(s,f,c,o,i);e._backpressure=undefined;e._backpressureChangePromise=undefined;e._backpressureChangePromise_resolve=undefined;nN(e,true);e._transformStreamController=undefined}function nI(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")){return false}return e instanceof nF}function nx(e,t){r1(e._readable._readableStreamController,t);nU(e,t)}function nU(e,t){nG(e._transformStreamController);rg(e._writable._writableStreamController,t);nD(e)}function nD(e){if(e._backpressure){nN(e,false)}}function nN(e,t){if(e._backpressureChangePromise!==undefined){e._backpressureChangePromise_resolve()}e._backpressureChangePromise=u(t=>{e._backpressureChangePromise_resolve=t});e._backpressure=t}class nH{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!nV(this)){throw n2("desiredSize")}const e=this._controlledTransformStream._readable._readableStreamController;return r3(e)}enqueue(e=undefined){if(!nV(this)){throw n2("enqueue")}nZ(this,e)}error(e=undefined){if(!nV(this)){throw n2("error")}nJ(this,e)}terminate(){if(!nV(this)){throw n2("terminate")}nX(this)}}Object.defineProperties(nH.prototype,{enqueue:{enumerable:true},error:{enumerable:true},terminate:{enumerable:true},desiredSize:{enumerable:true}});o(nH.prototype.enqueue,"enqueue");o(nH.prototype.error,"error");o(nH.prototype.terminate,"terminate");if(typeof Symbol.toStringTag==="symbol"){Object.defineProperty(nH.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:true})}function nV(e){if(!r(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")){return false}return e instanceof nH}function nY(e,t,r,n,o){t._controlledTransformStream=e;e._transformStreamController=t;t._transformAlgorithm=r;t._flushAlgorithm=n;t._cancelAlgorithm=o;t._finishPromise=undefined;t._finishPromise_resolve=undefined;t._finishPromise_reject=undefined}function nQ(e,t){const r=Object.create(nH.prototype);let n;let o;let i;if(t.transform!==undefined){n=e=>t.transform(e,r)}else{n=e=>{try{nZ(r,e);return l(undefined)}catch(e){return f(e)}}}if(t.flush!==undefined){o=()=>t.flush(r)}else{o=()=>l(undefined)}if(t.cancel!==undefined){i=e=>t.cancel(e)}else{i=()=>l(undefined)}nY(e,r,n,o,i)}function nG(e){e._transformAlgorithm=undefined;e._flushAlgorithm=undefined;e._cancelAlgorithm=undefined}function nZ(e,t){const r=e._controlledTransformStream;const n=r._readable._readableStreamController;if(!r5(n)){throw new TypeError("Readable side is not in a state that permits enqueue")}try{r0(n,t)}catch(e){nU(r,e);throw r._readable._storedError}const o=r8(n);if(o!==r._backpressure){nN(r,true)}}function nJ(e,t){nx(e._controlledTransformStream,t)}function nK(e,t){const r=e._transformAlgorithm(t);return b(r,undefined,t=>{nx(e._controlledTransformStream,t);throw t})}function nX(e){const t=e._controlledTransformStream;const r=t._readable._readableStreamController;rX(r);const n=new TypeError("TransformStream terminated");nU(t,n)}function n0(e,t){const r=e._transformStreamController;if(e._backpressure){const n=e._backpressureChangePromise;return b(n,()=>{const n=e._writable;const o=n._state;if(o==="erroring"){throw n._storedError}return nK(r,t)})}return nK(r,t)}function n1(e,t){const r=e._transformStreamController;if(r._finishPromise!==undefined){return r._finishPromise}const n=e._readable;r._finishPromise=u((e,t)=>{r._finishPromise_resolve=e;r._finishPromise_reject=t});const o=r._cancelAlgorithm(t);nG(r);d(o,()=>{if(n._state==="errored"){n4(r,n._storedError)}else{r1(n._readableStreamController,t);n7(r)}return null},e=>{r1(n._readableStreamController,e);n4(r,e);return null});return r._finishPromise}function n3(e){const t=e._transformStreamController;if(t._finishPromise!==undefined){return t._finishPromise}const r=e._readable;t._finishPromise=u((e,r)=>{t._finishPromise_resolve=e;t._finishPromise_reject=r});const n=t._flushAlgorithm();nG(t);d(n,()=>{if(r._state==="errored"){n4(t,r._storedError)}else{rX(r._readableStreamController);n7(t)}return null},e=>{r1(r._readableStreamController,e);n4(t,e);return null});return t._finishPromise}function n8(e){nN(e,false);return e._backpressureChangePromise}function n5(e,t){const r=e._transformStreamController;if(r._finishPromise!==undefined){return r._finishPromise}const n=e._writable;r._finishPromise=u((e,t)=>{r._finishPromise_resolve=e;r._finishPromise_reject=t});const o=r._cancelAlgorithm(t);nG(r);d(o,()=>{if(n._state==="errored"){n4(r,n._storedError)}else{rg(n._writableStreamController,t);nD(e);n7(r)}return null},t=>{rg(n._writableStreamController,t);nD(e);n4(r,t);return null});return r._finishPromise}function n2(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function n7(e){if(e._finishPromise_resolve===undefined){return}e._finishPromise_resolve();e._finishPromise_resolve=undefined;e._finishPromise_reject=undefined}function n4(e,t){if(e._finishPromise_reject===undefined){return}y(e._finishPromise);e._finishPromise_reject(t);e._finishPromise_resolve=undefined;e._finishPromise_reject=undefined}function n6(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}e.ByteLengthQueuingStrategy=nE;e.CountQueuingStrategy=nk;e.ReadableByteStreamController=ex;e.ReadableStream=np;e.ReadableStreamBYOBReader=tS;e.ReadableStreamBYOBRequest=eI;e.ReadableStreamDefaultController=rQ;e.ReadableStreamDefaultReader=en;e.TransformStream=nF;e.TransformStreamDefaultController=nH;e.WritableStream=tI;e.WritableStreamDefaultController=rl;e.WritableStreamDefaultWriter=t6})},40851:(e,t,r)=>{if(!globalThis.DOMException){try{const{MessageChannel:e}=r(73566),t=new e().port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(e){e.constructor.name==="DOMException"&&(globalThis.DOMException=e.constructor)}}e.exports=globalThis.DOMException},41130:(e,t,r)=>{"use strict";r.d(t,{$n:()=>b,fS:()=>p});var n=r(11055);var o=r(68355);var{toStringTag:i,iterator:s,hasInstance:a}=Symbol,u=Math.random,l="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),f=(e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[i])?[(r=r!==void 0?r+"":t[i]=="File"?t.name:"blob",e),t.name!==r||t[i]=="blob"?new o.A([t],r,t):t]:[e,t+""]),c=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),d=(e,t,r)=>{if(t.length<r){throw new TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)}};const h=null&&F;const p=class e{#o=[];constructor(...e){if(e.length)throw new TypeError(`Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.`)}get[i](){return"FormData"}[s](){return this.entries()}static[a](e){return e&&typeof e==="object"&&e[i]==="FormData"&&!l.some(t=>typeof e[t]!="function")}append(...e){d("append",arguments,2);this.#o.push(f(...e))}delete(e){d("delete",arguments,1);e+="";this.#o=this.#o.filter(([t])=>t!==e)}get(e){d("get",arguments,1);e+="";for(var t=this.#o,r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1];return null}getAll(e,t){d("getAll",arguments,1);t=[];e+="";this.#o.forEach(r=>r[0]===e&&t.push(r[1]));return t}has(e){d("has",arguments,1);e+="";return this.#o.some(t=>t[0]===e)}forEach(e,t){d("forEach",arguments,1);for(var[r,n]of this)e.call(t,n,r,this)}set(...e){d("set",arguments,2);var t=[],r=!0;e=f(...e);this.#o.forEach(n=>{n[0]===e[0]?r&&(r=!t.push(e)):t.push(n)});r&&t.push(e);this.#o=t}*entries(){yield*this.#o}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};function b(e,t=n.A){var r=`${u()}${u()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],i=`--${r}\r
Content-Disposition: form-data; name="`;e.forEach((e,t)=>typeof e=="string"?o.push(i+c(t)+`"\r
\r
${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r
`):o.push(i+c(t)+`"; filename="${c(e.name,1)}"\r
Content-Type: ${e.type||"application/octet-stream"}\r
\r
`,e,"\r\n"));o.push(`--${r}--`);return new t(o,{type:"multipart/form-data; boundary="+r})}},56177:(e,t,r)=>{"use strict";r.d(t,{F8:()=>l,NX:()=>c,YQ:()=>a.A,ZH:()=>s.A,_M:()=>d,k4:()=>f});var n=r(73024);var o=r(76760);var i=r(40851);var s=r(68355);var a=r(11055);const{stat:u}=n.promises;const l=(e,t)=>h((0,n.statSync)(e),e,t);const f=(e,t)=>u(e).then(r=>h(r,e,t));const c=(e,t)=>u(e).then(r=>p(r,e,t));const d=(e,t)=>p((0,n.statSync)(e),e,t);const h=(e,t,r="")=>new a.A([new b({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:r});const p=(e,t,r="")=>new s.A([new b({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],(0,o.basename)(t),{type:r,lastModified:e.mtimeMs});class b{#i;#s;constructor(e){this.#i=e.path;this.#s=e.start;this.size=e.size;this.lastModified=e.lastModified}slice(e,t){return new b({path:this.#i,lastModified:this.lastModified,size:t-e,start:this.#s+e})}async *stream(){const{mtimeMs:e}=await u(this.#i);if(e>this.lastModified){throw new i("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError")}yield*(0,n.createReadStream)(this.#i,{start:this.#s,end:this.#s+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}var y=null&&l},68355:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(11055);const o=class e extends n.A{#a=0;#u="";constructor(e,t,r={}){if(arguments.length<2){throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`)}super(e,r);if(r===null)r={};const n=r.lastModified===undefined?Date.now():Number(r.lastModified);if(!Number.isNaN(n)){this.#a=n}this.#u=String(t)}get name(){return this.#u}get lastModified(){return this.#a}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof n.A&&/^(File)$/.test(e[Symbol.toStringTag])}};const i=o;const s=i},98823:(e,t,r)=>{"use strict";r.r(t);r.d(t,{AbortError:()=>et,Blob:()=>er.YQ,FetchError:()=>p,File:()=>er.ZH,FormData:()=>d.fS,Headers:()=>B,Request:()=>X,Response:()=>L,blobFrom:()=>er.k4,blobFromSync:()=>er.F8,"default":()=>eo,fileFrom:()=>er.NX,fileFromSync:()=>er._M,isRedirect:()=>W});var n=r(37067);var o=r(44708);var i=r(16141);var s=r(57075);var a=r(4573);function u(e){if(!/^data:/i.test(e)){throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")')}e=e.replace(/\r?\n/g,"");const t=e.indexOf(",");if(t===-1||t<=4){throw new TypeError("malformed data: URI")}const r=e.substring(5,t).split(";");let n="";let o=false;const i=r[0]||"text/plain";let s=i;for(let e=1;e<r.length;e++){if(r[e]==="base64"){o=true}else if(r[e]){s+=`;${r[e]}`;if(r[e].indexOf("charset=")===0){n=r[e].substring(8)}}}if(!r[0]&&!n.length){s+=";charset=US-ASCII";n="US-ASCII"}const a=o?"base64":"ascii";const u=unescape(e.substring(t+1));const l=Buffer.from(u,a);l.type=i;l.typeFull=s;l.charset=n;return l}const l=u;var f=r(57975);var c=r(11055);var d=r(41130);class h extends Error{constructor(e,t){super(e);Error.captureStackTrace(this,this.constructor);this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};class p extends h{constructor(e,t,r){super(e,t);if(r){this.code=this.errno=r.code;this.erroredSysCall=r.syscall}}};const b=Symbol.toStringTag;const y=e=>{return typeof e==="object"&&typeof e.append==="function"&&typeof e.delete==="function"&&typeof e.get==="function"&&typeof e.getAll==="function"&&typeof e.has==="function"&&typeof e.set==="function"&&typeof e.sort==="function"&&e[b]==="URLSearchParams"};const m=e=>{return e&&typeof e==="object"&&typeof e.arrayBuffer==="function"&&typeof e.type==="string"&&typeof e.stream==="function"&&typeof e.constructor==="function"&&/^(Blob|File)$/.test(e[b])};const _=e=>{return typeof e==="object"&&(e[b]==="AbortSignal"||e[b]==="EventTarget")};const g=(e,t)=>{const r=new URL(t).hostname;const n=new URL(e).hostname;return r===n||r.endsWith(`.${n}`)};const w=(e,t)=>{const r=new URL(t).protocol;const n=new URL(e).protocol;return r===n};const S=(0,f.promisify)(s.pipeline);const T=Symbol("Body internals");class v{constructor(e,{size:t=0}={}){let r=null;if(e===null){e=null}else if(y(e)){e=a.Buffer.from(e.toString())}else if(m(e)){}else if(a.Buffer.isBuffer(e)){}else if(f.types.isAnyArrayBuffer(e)){e=a.Buffer.from(e)}else if(ArrayBuffer.isView(e)){e=a.Buffer.from(e.buffer,e.byteOffset,e.byteLength)}else if(e instanceof s){}else if(e instanceof d.fS){e=(0,d.$n)(e);r=e.type.split("=")[1]}else{e=a.Buffer.from(String(e))}let n=e;if(a.Buffer.isBuffer(e)){n=s.Readable.from(e)}else if(m(e)){n=s.Readable.from(e.stream())}this[T]={body:e,stream:n,boundary:r,disturbed:false,error:null};this.size=t;if(e instanceof s){e.on("error",e=>{const t=e instanceof h?e:new p(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[T].error=t})}}get body(){return this[T].stream}get bodyUsed(){return this[T].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:r}=await R(this);return e.slice(t,t+r)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new d.fS;const t=new URLSearchParams(await this.text());for(const[r,n]of t){e.append(r,n)}return e}const{toFormData:t}=await r.e(303).then(r.bind(r,39303));return t(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[T].body&&this[T].body.type||"";const t=await this.arrayBuffer();return new c.A([t],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await R(this);return new TextDecoder().decode(e)}buffer(){return R(this)}}v.prototype.buffer=(0,f.deprecate)(v.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(v.prototype,{body:{enumerable:true},bodyUsed:{enumerable:true},arrayBuffer:{enumerable:true},blob:{enumerable:true},json:{enumerable:true},text:{enumerable:true},data:{get:(0,f.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function R(e){if(e[T].disturbed){throw new TypeError(`body used already for: ${e.url}`)}e[T].disturbed=true;if(e[T].error){throw e[T].error}const{body:t}=e;if(t===null){return a.Buffer.alloc(0)}if(!(t instanceof s)){return a.Buffer.alloc(0)}const r=[];let n=0;try{for await(const o of t){if(e.size>0&&n+o.length>e.size){const r=new p(`content size at ${e.url} over limit: ${e.size}`,"max-size");t.destroy(r);throw r}n+=o.length;r.push(o)}}catch(r){const t=r instanceof h?r:new p(`Invalid response body while trying to fetch ${e.url}: ${r.message}`,"system",r);throw t}if(t.readableEnded===true||t._readableState.ended===true){try{if(r.every(e=>typeof e==="string")){return a.Buffer.from(r.join(""))}return a.Buffer.concat(r,n)}catch(t){throw new p(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}}else{throw new p(`Premature close of server response while trying to fetch ${e.url}`)}}const P=(e,t)=>{let r;let n;let{body:o}=e[T];if(e.bodyUsed){throw new Error("cannot clone body after it is used")}if(o instanceof s&&typeof o.getBoundary!=="function"){r=new s.PassThrough({highWaterMark:t});n=new s.PassThrough({highWaterMark:t});o.pipe(r);o.pipe(n);e[T].stream=r;o=n}return o};const E=(0,f.deprecate)(e=>e.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167");const C=(e,t)=>{if(e===null){return null}if(typeof e==="string"){return"text/plain;charset=UTF-8"}if(y(e)){return"application/x-www-form-urlencoded;charset=UTF-8"}if(m(e)){return e.type||null}if(a.Buffer.isBuffer(e)||f.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)){return null}if(e instanceof d.fS){return`multipart/form-data; boundary=${t[T].boundary}`}if(e&&typeof e.getBoundary==="function"){return`multipart/form-data;boundary=${E(e)}`}if(e instanceof s){return null}return"text/plain;charset=UTF-8"};const q=e=>{const{body:t}=e[T];if(t===null){return 0}if(m(t)){return t.size}if(a.Buffer.isBuffer(t)){return t.length}if(t&&typeof t.getLengthSync==="function"){return t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null}return null};const A=async(e,{body:t})=>{if(t===null){e.end()}else{await S(t,e)}};const k=typeof n.validateHeaderName==="function"?n.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"});throw t}};const j=typeof n.validateHeaderValue==="function"?n.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"});throw t}};class B extends URLSearchParams{constructor(e){let t=[];if(e instanceof B){const r=e.raw();for(const[e,n]of Object.entries(r)){t.push(...n.map(t=>[e,t]))}}else if(e==null){}else if(typeof e==="object"&&!f.types.isBoxedPrimitive(e)){const r=e[Symbol.iterator];if(r==null){t.push(...Object.entries(e))}else{if(typeof r!=="function"){throw new TypeError("Header pairs must be iterable")}t=[...e].map(e=>{if(typeof e!=="object"||f.types.isBoxedPrimitive(e)){throw new TypeError("Each header pair must be an iterable object")}return[...e]}).map(e=>{if(e.length!==2){throw new TypeError("Each header pair must be a name/value tuple")}return[...e]})}}else{throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)")}t=t.length>0?t.map(([e,t])=>{k(e);j(e,String(t));return[String(e).toLowerCase(),String(t)]}):undefined;super(t);return new Proxy(this,{get(e,t,r){switch(t){case"append":case"set":return(r,n)=>{k(r);j(r,String(n));return URLSearchParams.prototype[t].call(e,String(r).toLowerCase(),String(n))};case"delete":case"has":case"getAll":return r=>{k(r);return URLSearchParams.prototype[t].call(e,String(r).toLowerCase())};case"keys":return()=>{e.sort();return new Set(URLSearchParams.prototype.keys.call(e)).keys()};default:return Reflect.get(e,t,r)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(t.length===0){return null}let r=t.join(", ");if(/^content-encoding$/i.test(e)){r=r.toLowerCase()}return r}forEach(e,t=undefined){for(const r of this.keys()){Reflect.apply(e,t,[this.get(r),r,this])}}*values(){for(const e of this.keys()){yield this.get(e)}}*entries(){for(const e of this.keys()){yield[e,this.get(e)]}}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,t)=>{e[t]=this.getAll(t);return e},{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,t)=>{const r=this.getAll(t);if(t==="host"){e[t]=r[0]}else{e[t]=r.length>1?r:r[0]}return e},{})}}Object.defineProperties(B.prototype,["get","entries","forEach","values"].reduce((e,t)=>{e[t]={enumerable:true};return e},{}));function O(e=[]){return new B(e.reduce((e,t,r,n)=>{if(r%2===0){e.push(n.slice(r,r+2))}return e},[]).filter(([e,t])=>{try{k(e);j(e,String(t));return true}catch{return false}}))};const z=new Set([301,302,303,307,308]);const W=e=>{return z.has(e)};const $=Symbol("Response internals");class L extends v{constructor(e=null,t={}){super(e,t);const r=t.status!=null?t.status:200;const n=new B(t.headers);if(e!==null&&!n.has("Content-Type")){const t=C(e,this);if(t){n.append("Content-Type",t)}}this[$]={type:"default",url:t.url,status:r,statusText:t.statusText||"",headers:n,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[$].type}get url(){return this[$].url||""}get status(){return this[$].status}get ok(){return this[$].status>=200&&this[$].status<300}get redirected(){return this[$].counter>0}get statusText(){return this[$].statusText}get headers(){return this[$].headers}get highWaterMark(){return this[$].highWaterMark}clone(){return new L(P(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!W(t)){throw new RangeError('Failed to execute "redirect" on "response": Invalid status code')}return new L(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new L(null,{status:0,statusText:""});e[$].type="error";return e}static json(e=undefined,t={}){const r=JSON.stringify(e);if(r===undefined){throw new TypeError("data is not JSON serializable")}const n=new B(t&&t.headers);if(!n.has("content-type")){n.set("content-type","application/json")}return new L(r,{...t,headers:n})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(L.prototype,{type:{enumerable:true},url:{enumerable:true},status:{enumerable:true},ok:{enumerable:true},redirected:{enumerable:true},statusText:{enumerable:true},headers:{enumerable:true},clone:{enumerable:true}});var M=r(73136);const I=e=>{if(e.search){return e.search}const t=e.href.length-1;const r=e.hash||(e.href[t]==="#"?"#":"");return e.href[t-r.length]==="?"?"?":""};var x=r(77030);function U(e,t=false){if(e==null){return"no-referrer"}e=new URL(e);if(/^(about|blob|data):$/.test(e.protocol)){return"no-referrer"}e.username="";e.password="";e.hash="";if(t){e.pathname="";e.search=""}return e}const D=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);const N="strict-origin-when-cross-origin";function H(e){if(!D.has(e)){throw new TypeError(`Invalid referrerPolicy: ${e}`)}return e}function V(e){if(/^(http|ws)s:$/.test(e.protocol)){return true}const t=e.host.replace(/(^\[)|(]$)/g,"");const r=(0,x.isIP)(t);if(r===4&&/^127\./.test(t)){return true}if(r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)){return true}if(e.host==="localhost"||e.host.endsWith(".localhost")){return false}if(e.protocol==="file:"){return true}return false}function Y(e){if(/^about:(blank|srcdoc)$/.test(e)){return true}if(e.protocol==="data:"){return true}if(/^(blob|filesystem):$/.test(e.protocol)){return true}return V(e)}function Q(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if(e.referrer==="no-referrer"||e.referrerPolicy===""){return null}const n=e.referrerPolicy;if(e.referrer==="about:client"){return"no-referrer"}const o=e.referrer;let i=U(o);let s=U(o,true);if(i.toString().length>4096){i=s}if(t){i=t(i)}if(r){s=r(s)}const a=new URL(e.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return s;case"unsafe-url":return i;case"strict-origin":if(Y(i)&&!Y(a)){return"no-referrer"}return s.toString();case"strict-origin-when-cross-origin":if(i.origin===a.origin){return i}if(Y(i)&&!Y(a)){return"no-referrer"}return s;case"same-origin":if(i.origin===a.origin){return i}return"no-referrer";case"origin-when-cross-origin":if(i.origin===a.origin){return i}return s;case"no-referrer-when-downgrade":if(Y(i)&&!Y(a)){return"no-referrer"}return i;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function G(e){const t=(e.get("referrer-policy")||"").split(/[,\s]+/);let r="";for(const e of t){if(e&&D.has(e)){r=e}}return r};const Z=Symbol("Request internals");const J=e=>{return typeof e==="object"&&typeof e[Z]==="object"};const K=(0,f.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class X extends v{constructor(e,t={}){let r;if(J(e)){r=new URL(e.url)}else{r=new URL(e);e={}}if(r.username!==""||r.password!==""){throw new TypeError(`${r} is an url with embedded credentials.`)}let n=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(n)){n=n.toUpperCase()}if(!J(t)&&"data"in t){K()}if((t.body!=null||J(e)&&e.body!==null)&&(n==="GET"||n==="HEAD")){throw new TypeError("Request with GET/HEAD method cannot have body")}const o=t.body?t.body:J(e)&&e.body!==null?P(e):null;super(o,{size:t.size||e.size||0});const i=new B(t.headers||e.headers||{});if(o!==null&&!i.has("Content-Type")){const e=C(o,this);if(e){i.set("Content-Type",e)}}let s=J(e)?e.signal:null;if("signal"in t){s=t.signal}if(s!=null&&!_(s)){throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget")}let a=t.referrer==null?e.referrer:t.referrer;if(a===""){a="no-referrer"}else if(a){const e=new URL(a);a=/^about:(\/\/)?client$/.test(e)?"client":e}else{a=undefined}this[Z]={method:n,redirect:t.redirect||e.redirect||"follow",headers:i,parsedURL:r,signal:s,referrer:a};this.follow=t.follow===undefined?e.follow===undefined?20:e.follow:t.follow;this.compress=t.compress===undefined?e.compress===undefined?true:e.compress:t.compress;this.counter=t.counter||e.counter||0;this.agent=t.agent||e.agent;this.highWaterMark=t.highWaterMark||e.highWaterMark||16384;this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||false;this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[Z].method}get url(){return(0,M.format)(this[Z].parsedURL)}get headers(){return this[Z].headers}get redirect(){return this[Z].redirect}get signal(){return this[Z].signal}get referrer(){if(this[Z].referrer==="no-referrer"){return""}if(this[Z].referrer==="client"){return"about:client"}if(this[Z].referrer){return this[Z].referrer.toString()}return undefined}get referrerPolicy(){return this[Z].referrerPolicy}set referrerPolicy(e){this[Z].referrerPolicy=H(e)}clone(){return new X(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(X.prototype,{method:{enumerable:true},url:{enumerable:true},headers:{enumerable:true},redirect:{enumerable:true},clone:{enumerable:true},signal:{enumerable:true},referrer:{enumerable:true},referrerPolicy:{enumerable:true}});const ee=e=>{const{parsedURL:t}=e[Z];const r=new B(e[Z].headers);if(!r.has("Accept")){r.set("Accept","*/*")}let n=null;if(e.body===null&&/^(post|put)$/i.test(e.method)){n="0"}if(e.body!==null){const t=q(e);if(typeof t==="number"&&!Number.isNaN(t)){n=String(t)}}if(n){r.set("Content-Length",n)}if(e.referrerPolicy===""){e.referrerPolicy=N}if(e.referrer&&e.referrer!=="no-referrer"){e[Z].referrer=Q(e)}else{e[Z].referrer="no-referrer"}if(e[Z].referrer instanceof URL){r.set("Referer",e.referrer)}if(!r.has("User-Agent")){r.set("User-Agent","node-fetch")}if(e.compress&&!r.has("Accept-Encoding")){r.set("Accept-Encoding","gzip, deflate, br")}let{agent:o}=e;if(typeof o==="function"){o=o(t)}const i=I(t);const s={path:t.pathname+i,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:o};return{parsedURL:t,options:s}};class et extends h{constructor(e,t="aborted"){super(e,t)}}var er=r(56177);const en=new Set(["data:","http:","https:"]);async function eo(e,t){return new Promise((r,a)=>{const u=new X(e,t);const{parsedURL:f,options:c}=ee(u);if(!en.has(f.protocol)){throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${f.protocol.replace(/:$/,"")}" is not supported.`)}if(f.protocol==="data:"){const e=l(u.url);const t=new L(e,{headers:{"Content-Type":e.typeFull}});r(t);return}const d=(f.protocol==="https:"?o:n).request;const{signal:h}=u;let b=null;const y=()=>{const e=new et("The operation was aborted.");a(e);if(u.body&&u.body instanceof s.Readable){u.body.destroy(e)}if(!b||!b.body){return}b.body.emit("error",e)};if(h&&h.aborted){y();return}const m=()=>{y();S()};const _=d(f.toString(),c);if(h){h.addEventListener("abort",m)}const S=()=>{_.abort();if(h){h.removeEventListener("abort",m)}};_.on("error",e=>{a(new p(`request to ${u.url} failed, reason: ${e.message}`,"system",e));S()});ei(_,e=>{if(b&&b.body){b.body.destroy(e)}});if(process.version<"v14"){_.on("socket",e=>{let t;e.prependListener("end",()=>{t=e._eventsCount});e.prependListener("close",r=>{if(b&&t<e._eventsCount&&!r){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE";b.body.emit("error",e)}})})}_.on("response",e=>{_.setTimeout(0);const n=O(e.rawHeaders);if(W(e.statusCode)){const o=n.get("Location");let i=null;try{i=o===null?null:new URL(o,u.url)}catch{if(u.redirect!=="manual"){a(new p(`uri requested responds with an invalid redirect URL: ${o}`,"invalid-redirect"));S();return}}switch(u.redirect){case"error":a(new p(`uri requested responds with a redirect, redirect mode is set to error: ${u.url}`,"no-redirect"));S();return;case"manual":break;case"follow":{if(i===null){break}if(u.counter>=u.follow){a(new p(`maximum redirect reached at: ${u.url}`,"max-redirect"));S();return}const o={headers:new B(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:P(u),signal:u.signal,size:u.size,referrer:u.referrer,referrerPolicy:u.referrerPolicy};if(!g(u.url,i)||!w(u.url,i)){for(const e of["authorization","www-authenticate","cookie","cookie2"]){o.headers.delete(e)}}if(e.statusCode!==303&&u.body&&t.body instanceof s.Readable){a(new p("Cannot follow redirect with body being a readable stream","unsupported-redirect"));S();return}if(e.statusCode===303||(e.statusCode===301||e.statusCode===302)&&u.method==="POST"){o.method="GET";o.body=undefined;o.headers.delete("content-length")}const l=G(n);if(l){o.referrerPolicy=l}r(eo(new X(i,o)));S();return}default:return a(new TypeError(`Redirect option '${u.redirect}' is not a valid value of RequestRedirect`))}}if(h){e.once("end",()=>{h.removeEventListener("abort",m)})}let o=(0,s.pipeline)(e,new s.PassThrough,e=>{if(e){a(e)}});if(process.version<"v12.10"){e.on("aborted",m)}const l={url:u.url,status:e.statusCode,statusText:e.statusMessage,headers:n,size:u.size,counter:u.counter,highWaterMark:u.highWaterMark};const f=n.get("Content-Encoding");if(!u.compress||u.method==="HEAD"||f===null||e.statusCode===204||e.statusCode===304){b=new L(o,l);r(b);return}const c={flush:i.Z_SYNC_FLUSH,finishFlush:i.Z_SYNC_FLUSH};if(f==="gzip"||f==="x-gzip"){o=(0,s.pipeline)(o,i.createGunzip(c),e=>{if(e){a(e)}});b=new L(o,l);r(b);return}if(f==="deflate"||f==="x-deflate"){const t=(0,s.pipeline)(e,new s.PassThrough,e=>{if(e){a(e)}});t.once("data",e=>{if((e[0]&15)===8){o=(0,s.pipeline)(o,i.createInflate(),e=>{if(e){a(e)}})}else{o=(0,s.pipeline)(o,i.createInflateRaw(),e=>{if(e){a(e)}})}b=new L(o,l);r(b)});t.once("end",()=>{if(!b){b=new L(o,l);r(b)}});return}if(f==="br"){o=(0,s.pipeline)(o,i.createBrotliDecompress(),e=>{if(e){a(e)}});b=new L(o,l);r(b);return}b=new L(o,l);r(b)});A(_,u).catch(a)})}function ei(e,t){const r=a.Buffer.from("0\r\n\r\n");let n=false;let o=false;let i;e.on("response",e=>{const{headers:t}=e;n=t["transfer-encoding"]==="chunked"&&!t["content-length"]});e.on("socket",s=>{const u=()=>{if(n&&!o){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE";t(e)}};const l=e=>{o=a.Buffer.compare(e.slice(-5),r)===0;if(!o&&i){o=a.Buffer.compare(i.slice(-3),r.slice(0,3))===0&&a.Buffer.compare(e.slice(-2),r.slice(3))===0}i=e};s.prependListener("close",u);s.on("data",l);e.on("close",()=>{s.removeListener("close",u);s.removeListener("data",l)})})}}};