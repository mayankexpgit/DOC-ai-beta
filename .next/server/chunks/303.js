"use strict";exports.id=303;exports.ids=[303];exports.modules={39303:(e,t,n)=>{n.d(t,{toFormData:()=>H});var r=n(56177);var s=n(41130);let a=0;const i={START_BOUNDARY:a++,HEADER_FIELD_START:a++,HEADER_FIELD:a++,HEADER_VALUE_START:a++,HEADER_VALUE:a++,HEADER_VALUE_ALMOST_DONE:a++,HEADERS_ALMOST_DONE:a++,PART_DATA_START:a++,PART_DATA:a++,END:a++};let o=1;const A={PART_BOUNDARY:o,LAST_BOUNDARY:o*=2};const E=10;const d=13;const c=32;const l=45;const D=58;const h=97;const f=122;const T=e=>e|32;const _=()=>{};class R{constructor(e){this.index=0;this.flags=0;this.onHeaderEnd=_;this.onHeaderField=_;this.onHeadersEnd=_;this.onHeaderValue=_;this.onPartBegin=_;this.onPartData=_;this.onPartEnd=_;this.boundaryChars={};e="\r\n--"+e;const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++){t[n]=e.charCodeAt(n);this.boundaryChars[t[n]]=true}this.boundary=t;this.lookbehind=new Uint8Array(this.boundary.length+8);this.state=i.START_BOUNDARY}write(e){let t=0;const n=e.length;let r=this.index;let{lookbehind:s,boundary:a,boundaryChars:o,index:_,state:R,flags:u}=this;const H=this.boundary.length;const L=H-1;const S=e.length;let b;let P;const O=e=>{this[e+"Mark"]=t};const U=e=>{delete this[e+"Mark"]};const g=(e,t,n,r)=>{if(t===undefined||t!==n){this[e](r&&r.subarray(t,n))}};const N=(n,r)=>{const s=n+"Mark";if(!(s in this)){return}if(r){g(n,this[s],t,e);delete this[s]}else{g(n,this[s],e.length,e);this[s]=0}};for(t=0;t<n;t++){b=e[t];switch(R){case i.START_BOUNDARY:if(_===a.length-2){if(b===l){u|=A.LAST_BOUNDARY}else if(b!==d){return}_++;break}else if(_-1===a.length-2){if(u&A.LAST_BOUNDARY&&b===l){R=i.END;u=0}else if(!(u&A.LAST_BOUNDARY)&&b===E){_=0;g("onPartBegin");R=i.HEADER_FIELD_START}else{return}break}if(b!==a[_+2]){_=-2}if(b===a[_+2]){_++}break;case i.HEADER_FIELD_START:R=i.HEADER_FIELD;O("onHeaderField");_=0;case i.HEADER_FIELD:if(b===d){U("onHeaderField");R=i.HEADERS_ALMOST_DONE;break}_++;if(b===l){break}if(b===D){if(_===1){return}N("onHeaderField",true);R=i.HEADER_VALUE_START;break}P=T(b);if(P<h||P>f){return}break;case i.HEADER_VALUE_START:if(b===c){break}O("onHeaderValue");R=i.HEADER_VALUE;case i.HEADER_VALUE:if(b===d){N("onHeaderValue",true);g("onHeaderEnd");R=i.HEADER_VALUE_ALMOST_DONE}break;case i.HEADER_VALUE_ALMOST_DONE:if(b!==E){return}R=i.HEADER_FIELD_START;break;case i.HEADERS_ALMOST_DONE:if(b!==E){return}g("onHeadersEnd");R=i.PART_DATA_START;break;case i.PART_DATA_START:R=i.PART_DATA;O("onPartData");case i.PART_DATA:r=_;if(_===0){t+=L;while(t<S&&!(e[t]in o)){t+=H}t-=L;b=e[t]}if(_<a.length){if(a[_]===b){if(_===0){N("onPartData",true)}_++}else{_=0}}else if(_===a.length){_++;if(b===d){u|=A.PART_BOUNDARY}else if(b===l){u|=A.LAST_BOUNDARY}else{_=0}}else if(_-1===a.length){if(u&A.PART_BOUNDARY){_=0;if(b===E){u&=~A.PART_BOUNDARY;g("onPartEnd");g("onPartBegin");R=i.HEADER_FIELD_START;break}}else if(u&A.LAST_BOUNDARY){if(b===l){g("onPartEnd");R=i.END;u=0}else{_=0}}else{_=0}}if(_>0){s[_-1]=b}else if(r>0){const e=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);g("onPartData",0,r,e);r=0;O("onPartData");t--}break;case i.END:break;default:throw new Error(`Unexpected state entered: ${R}`)}}N("onHeaderField");N("onHeaderValue");N("onPartData");this.index=_;this.state=R;this.flags=u}end(){if(this.state===i.HEADER_FIELD_START&&this.index===0||this.state===i.PART_DATA&&this.index===this.boundary.length){this.onPartEnd()}else if(this.state!==i.END){throw new Error("MultipartParser.end(): stream ended unexpectedly")}}}function u(e){const t=e.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t){return}const n=t[2]||t[3]||"";let r=n.slice(n.lastIndexOf("\\")+1);r=r.replace(/%22/g,'"');r=r.replace(/&#(\d{4});/g,(e,t)=>{return String.fromCharCode(t)});return r}async function H(e,t){if(!/multipart/i.test(t)){throw new TypeError("Failed to fetch")}const n=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n){throw new TypeError("no or bad content-type header, no multipart boundary")}const a=new R(n[1]||n[2]);let i;let o;let A;let E;let d;let c;const l=[];const D=new s.fS;const h=e=>{A+=H.decode(e,{stream:true})};const f=e=>{l.push(e)};const T=()=>{const e=new r.ZH(l,c,{type:d});D.append(E,e)};const _=()=>{D.append(E,A)};const H=new TextDecoder("utf-8");H.decode();a.onPartBegin=function(){a.onPartData=h;a.onPartEnd=_;i="";o="";A="";E="";d="";c=null;l.length=0};a.onHeaderField=function(e){i+=H.decode(e,{stream:true})};a.onHeaderValue=function(e){o+=H.decode(e,{stream:true})};a.onHeaderEnd=function(){o+=H.decode();i=i.toLowerCase();if(i==="content-disposition"){const e=o.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);if(e){E=e[2]||e[3]||""}c=u(o);if(c){a.onPartData=f;a.onPartEnd=T}}else if(i==="content-type"){d=o}o="";i=""};for await(const t of e){a.write(t)}a.end();return D}}};